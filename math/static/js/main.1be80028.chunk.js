(this["webpackJsonpkha-app"]=this["webpackJsonpkha-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t){var n;!function(e){"use strict";var t=function(){function e(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(e.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(e){this._dropEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(e){this._effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),e.prototype.clearData=function(e){null!=e?delete this._data[e]:this._data=null},e.prototype.getData=function(e){return this._data[e]||""},e.prototype.setData=function(e,t){this._data[e]=t},e.prototype.setDragImage=function(e,t,r){var a=n._instance;a._imgCustom=e,a._imgOffset={x:t,y:r}},e}();e.DataTransfer=t;var n=function(){function e(){if(this._lastClick=0,e._instance)throw"DragDropTouch instance already created.";var t=!1;if(document.addEventListener("test",(function(){}),{get passive(){return t=!0,!0}}),"ontouchstart"in document){var n=document,r=this._touchstart.bind(this),a=this._touchmove.bind(this),i=this._touchend.bind(this),o=!!t&&{passive:!1,capture:!1};n.addEventListener("touchstart",r,o),n.addEventListener("touchmove",a,o),n.addEventListener("touchend",i),n.addEventListener("touchcancel",i)}}return e.getInstance=function(){return e._instance},e.prototype._touchstart=function(t){var n=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<e._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target))return t.preventDefault(),void this._reset();this._reset();var r=this._closestDraggable(t.target);r&&(this._dispatchEvent(t,"mousemove",t.target)||this._dispatchEvent(t,"mousedown",t.target)||(this._dragSource=r,this._ptDown=this._getPoint(t),this._lastTouch=t,t.preventDefault(),setTimeout((function(){n._dragSource==r&&null==n._img&&n._dispatchEvent(t,"contextmenu",r)&&n._reset()}),e._CTXMENU),e._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout((function(){n._isDragEnabled=!0,n._touchmove(t)}),e._PRESSHOLDAWAIT))))}},e.prototype._touchmove=function(e){if(this._shouldCancelPressHoldMove(e))this._reset();else if(this._shouldHandleMove(e)||this._shouldHandlePressHoldMove(e)){var t=this._getTarget(e);if(this._dispatchEvent(e,"mousemove",t))return this._lastTouch=e,void e.preventDefault();this._dragSource&&!this._img&&this._shouldStartDragging(e)&&(this._dispatchEvent(e,"dragstart",this._dragSource),this._createImage(e),this._dispatchEvent(e,"dragenter",t)),this._img&&(this._lastTouch=e,e.preventDefault(),t!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(e,"dragenter",t),this._lastTarget=t),this._moveImage(e),this._isDropZone=this._dispatchEvent(e,"dragover",t))}},e.prototype._touchend=function(e){if(this._shouldHandle(e)){if(this._dispatchEvent(this._lastTouch,"mouseup",e.target))return void e.preventDefault();this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",e.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(e.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},e.prototype._shouldHandle=function(e){return e&&!e.defaultPrevented&&e.touches&&e.touches.length<2},e.prototype._shouldHandleMove=function(t){return!e._ISPRESSHOLDMODE&&this._shouldHandle(t)},e.prototype._shouldHandlePressHoldMove=function(t){return e._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},e.prototype._shouldCancelPressHoldMove=function(t){return e._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>e._PRESSHOLDMARGIN},e.prototype._shouldStartDragging=function(t){var n=this._getDelta(t);return n>e._THRESHOLD||e._ISPRESSHOLDMODE&&n>=e._PRESSHOLDTHRESHOLD},e.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new t,clearInterval(this._pressHoldInterval)},e.prototype._getPoint=function(e,t){return e&&e.touches&&(e=e.touches[0]),{x:t?e.pageX:e.clientX,y:t?e.pageY:e.clientY}},e.prototype._getDelta=function(t){if(e._ISPRESSHOLDMODE&&!this._ptDown)return 0;var n=this._getPoint(t);return Math.abs(n.x-this._ptDown.x)+Math.abs(n.y-this._ptDown.y)},e.prototype._getTarget=function(e){for(var t=this._getPoint(e),n=document.elementFromPoint(t.x,t.y);n&&"none"==getComputedStyle(n).pointerEvents;)n=n.parentElement;return n},e.prototype._createImage=function(t){this._img&&this._destroyImage();var n=this._imgCustom||this._dragSource;if(this._img=n.cloneNode(!0),this._copyStyle(n,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var r=n.getBoundingClientRect(),a=this._getPoint(t);this._imgOffset={x:a.x-r.left,y:a.y-r.top},this._img.style.opacity=e._OPACITY.toString()}this._moveImage(t),document.body.appendChild(this._img)},e.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},e.prototype._moveImage=function(e){var t=this;requestAnimationFrame((function(){if(t._img){var n=t._getPoint(e,!0),r=t._img.style;r.position="absolute",r.pointerEvents="none",r.zIndex="999999",r.left=Math.round(n.x-t._imgOffset.x)+"px",r.top=Math.round(n.y-t._imgOffset.y)+"px"}}))},e.prototype._copyProps=function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r];e[a]=t[a]}},e.prototype._copyStyle=function(t,n){if(e._rmvAtts.forEach((function(e){n.removeAttribute(e)})),t instanceof HTMLCanvasElement){var r=t,a=n;a.width=r.width,a.height=r.height,a.getContext("2d").drawImage(r,0,0)}for(var i=getComputedStyle(t),o=0;o<i.length;o++){var c=i[o];c.indexOf("transition")<0&&(n.style[c]=i[c])}n.style.pointerEvents="none";for(o=0;o<t.children.length;o++)this._copyStyle(t.children[o],n.children[o])},e.prototype._dispatchEvent=function(t,n,r){if(t&&r){var a=document.createEvent("Event"),i=t.touches?t.touches[0]:t;return a.initEvent(n,!0,!0),a.button=0,a.which=a.buttons=1,this._copyProps(a,t,e._kbdProps),this._copyProps(a,i,e._ptProps),a.dataTransfer=this._dataTransfer,r.dispatchEvent(a),a.defaultPrevented}return!1},e.prototype._closestDraggable=function(e){for(;e;e=e.parentElement)if(e.hasAttribute("draggable")&&e.draggable)return e;return null},e}();n._instance=new n,n._THRESHOLD=5,n._OPACITY=.5,n._DBLCLICK=500,n._CTXMENU=900,n._ISPRESSHOLDMODE=!1,n._PRESSHOLDAWAIT=400,n._PRESSHOLDMARGIN=25,n._PRESSHOLDTHRESHOLD=0,n._rmvAtts="id,class,style,draggable".split(","),n._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),n._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),e.DragDropTouch=n}(n||(n={}))},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r,a,i=n(1),o=n.n(i),c=n(13),s=n.n(c),l=(n(19),n(20),n(7)),u=n(12),d=n(14),h=n.n(d),p=n(5);(a=r||(r={})).IMAGES=["character-0.png","character-1.svg","character-2.svg","character-3.svg","character-4.svg","character-5.png","character-6.png","character-7.png","character-8.jpg","character-9.png","character-10.png","character-11.png","character-12.png","character-13.png","character-14.png","character-15.png","character-16.png","character-17.png","character-18.png","character-19.png","character-20.png","character-21.png","character-22.png","character-23.png","character-24.png","character-25.png","character-26.png","character-27.svg","character-28.png","character-29.png","character-30.png","character-31.png","character-32.png"],a.WILD_ANIMALS=["alligator","antelope","bear","camel","chimpanzee","coyote","crab","crocodile","dolphin","elephant","giraffe","gorilla","jellyfish","koala","leopard","lion","monkey","owl","panda","raccoon","shark","starfishes","walrus","wolf","woodpecker","zebra","badger","bat","deer","elk","fox","frog","hare","hedgehog","kangaroo","lizard","mole","otter","rabbit","rat","reindeer","snake","squirrel","toad"],a.SIZE=20,a.MIN=10,a.MAX=100;var g,f=n(4),v=n.n(f),m=n(2);!function(e){var t=v.a.mark(n);function n(e){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(m.a)(Array(e)).map((function(e,t){return t})),r=[];case 2:return 0===r.length&&(r=Object(m.a)(n).sort((function(){return Math.random()-.5}))),t.next=6,r.pop();case 6:t.next=2;break;case 8:case"end":return t.stop()}}),t)}e.shuffleGenerator=n;e.random=function(e,t){return~~(Math.random()*(t-e))+e},e.cloneDigit=function(e,t,n){var r=e.cloneNode(!0),a=r.innerText===t;return r.style.background=a?"green":"red",r.ondragend=function(e){var t=document.createElement("div");t.className="digit-panel",e.target.replaceWith(t)},n(~~a-1),r},e.cloneLetter=function(e,t,n){var r=e.cloneNode(!0),a=r.innerText===t;return r.style.background=a?"green":"red",r.ondragend=function(e){var t=document.createElement("div");t.className="letter-panel",e.target.replaceWith(t)},n(~~a-1),r}}(g||(g={}));var _,b=n(6),y=n(3),j=n(0),O=function(e){var t=e.digit,n=e.draggable,r=e.onDragStart,a=e.onDragEnd;Object(y.a)(e,["digit","draggable","onDragStart","onDragEnd"]);return Object(j.jsx)("div",{draggable:n,onDragStart:r,onDragEnd:a,className:"digit",style:{fontFamily:"FineCollege"},children:t})},x=Object(p.connect)((function(e){return{digitPanel:e.digitPanel}}),(function(e,t){return{targetPanel:function(t,n){e.setState({digitPanel:n})}}})),S=Object(p.connect)((function(e){return{panel:e.panel}}),(function(e,t){return{pickPanel:function(t,n){e.setState({panel:n})}}})),D=Object(p.connect)((function(e){return{session:e.session,random:e.random,results:e.results,penalty:e.penalty,finished:e.finished}}),(function(e,t){return{newSession:function(t){return e.setState({session:Math.random(),penalty:0,finished:!1,random:g.shuffleGenerator(r.IMAGES.length)})},updateResult:function(t,n,r){var a=t.results;a[n]=r,e.setState({results:a})},updateScore:function(t,n){var r=t.penalty;e.setState({penalty:r+n})},submit:function(t,n){var r=t.penalty;e.setState({penalty:r+n,finished:!0})}}})),E=D((function(e){var t=e.results,n=e.penalty,r=e.newSession,a=e.finished,i=e.submit;return Object(j.jsxs)("div",{style:{position:"fixed",top:200,right:0,width:180,paddingRight:40,textAlign:"center",zIndex:999},children:[Object(j.jsx)("div",{style:{fontWeight:"bold",margin:16,cursor:"pointer",height:96,backgroundImage:"url(".concat("/math","/reset.png)"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onClick:r}),Object(j.jsx)("div",{style:{fontFamily:"SaucerBB",fontSize:80,color:a?"red":"grey"},children:100+n}),Object(j.jsx)("div",{style:{fontWeight:"bold",backgroundColor:"yellow",padding:4,border:"2px solid blue",cursor:"pointer",pointerEvents:a?"none":"auto"},onClick:function(){var e=t.reduce((function(e,n){return e+100/t.length*~~n}),0);i(Math.ceil(e)-100)},children:"SUBMIT"})]})})),w=n(10),P=D((function(e){var t=e.session,n=e.random,a=e.onDragOver,i=e.onDrop,c=(Object(y.a)(e,["session","random","onDragOver","onDrop"]),o.a.useMemo((function(){return r.IMAGES[n.next().value]}),[t]));return Object(j.jsx)("div",{onDragOver:a,onDrop:i,children:Object(j.jsx)("div",{className:"digit-panel",style:{backgroundImage:"url(".concat("/math","/images/").concat(c,")")}})})})),k=x((function(e){var t=e.value,n=e.mask,r=void 0===n?t:n,a=e.targetPanel,i=(Object(y.a)(e,["value","mask","targetPanel"]),o.a.useRef(null));return t=("x".repeat(r.length)+t).slice(-r.length),Object(j.jsx)("div",{ref:i,style:{display:"flex",justifyContent:"flex-end"},children:Object(m.a)(r).map((function(e,n){return isFinite(+e)?Object(j.jsx)(O,{digit:+e,draggable:!1},n):Object(j.jsx)(P,{onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return a({validDigit:t[n],panel:e.currentTarget})}},n)}))})})),I=D((function(e){var t,n=e.id,r=e.operands,a=e.finished,i=e.updateResult,c=(Object(y.a)(e,["id","operands","finished","updateResult"]),o.a.useRef(null)),s=o.a.useRef(null),l=o.a.useRef(null),u=Object(b.a)(r,2),d=u[0],h=u[1],p=o.a.useMemo((function(){var e=d>h?"-":"+";return{operator:e,result:{"+":d+h,"-":d-h}[e]}}),[]),g=p.operator,f=p.result,_=!l.current||+(null===(t=l.current)||void 0===t?void 0:t.innerText.replace(/\s/g,""))===f;return o.a.useEffect((function(){function e(){return(e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(n,_);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),Object(j.jsxs)("div",{className:"calculation",style:{background:a&&!_?"orchid":"transparent"},children:[Object(j.jsx)("div",{ref:c,children:Object(j.jsx)(k,{value:String(d)})}),Object(j.jsx)("div",{className:"operator",children:g}),Object(j.jsx)("div",{ref:s,children:Object(j.jsx)(k,{value:String(h)})}),Object(j.jsx)("div",{style:{width:"100%",height:10,background:"#0051f5",color:"transparent",margin:"16px 0px"},children:"=="}),Object(j.jsx)("div",{ref:l,children:Object(j.jsx)(k,{value:String(f),mask:"x".repeat(Math.ceil(Math.log10(Math.max.apply(Math,Object(m.a)(r))))+1)})})]})})),M=D(x((function(e){var t=o.a.useState(0),n=Object(b.a)(t,2),a=(n[0],n[1]),i=e.finished,c=e.session,s=e.digitPanel,l=e.targetPanel,u=e.updateScore,d=o.a.useMemo((function(){return Object(m.a)(Array(r.SIZE)).map((function(){return[g.random(r.MIN,r.MAX),g.random(r.MIN,r.MAX)]}))}),[c]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{display:"flex",position:"fixed",backgroundColor:"transparent",zIndex:999},children:Object(m.a)(Array(10)).map((function(e,t){return Object(j.jsx)(O,{digit:t,draggable:!i,onDragStart:function(e){return l(null)},onDragEnd:function(e){if(s){var t=s.validDigit,n=s.panel;n.innerHTML="",n.appendChild(g.cloneDigit(e.target,t,u)),a(Math.random())}}},t)}))}),Object(j.jsx)(E,{}),Object(j.jsx)("div",{className:"content-panel",children:Object(j.jsx)("div",{style:{display:"flex",flexFlow:"wrap",backgroundColor:"linen"},children:d.map((function(e,t){return Object(j.jsx)(I,{id:String(t),operands:e},t)}))})})]},c)}))),T=D((function(e){var t=e.session,n=e.random,a=e.onDragOver,i=e.onDrop,c=(Object(y.a)(e,["session","random","onDragOver","onDrop"]),o.a.useMemo((function(){return r.IMAGES[n.next().value]}),[t]));return Object(j.jsx)("div",{onDragOver:a,onDrop:i,children:Object(j.jsx)("div",{className:"letter-panel",style:{backgroundImage:"url(".concat("/math","/images/").concat(c,")")}})})})),A=function(e){var t=e.word,n=o.a.useMemo((function(){var e="".concat(t).concat("_".repeat(t.length)),n=document.createElement("audio"),r=document.createElement("source");return r.src="https://www.oxfordlearnersdictionaries.com/media/american_english/us_pron/"+"/".concat(e.slice(0,1))+"/".concat(e.slice(0,3))+"/".concat(e.slice(0,5))+"/".concat(t,"__us_1.mp3"),r.type="audio/mpeg",n.appendChild(r),n}),[t]);return Object(j.jsx)("div",{style:{width:180,textAlign:"center",zIndex:999},children:Object(j.jsx)("div",{style:{fontWeight:"bold",margin:16,cursor:"pointer",height:96,backgroundImage:"url(".concat("/math","/speaker.png)"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onClick:function(){return n.play()}})})},H=function(e){var t=e.word,n=o.a.useMemo((function(){function e(){return(e=Object(w.a)(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,n=[],(r=new MediaRecorder(t,{mimeType:"video/webm; codecs=vp9"})).ondataavailable=function(e){if(console.log("ondataavailable"),n.push(e.data),"inactive"==r.state)new Blob(n,{type:"audio/webm"})};case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=document.createElement("audio"),n=document.createElement("source");return n.type="audio/webm",t.appendChild(n),t}),[t]);return Object(j.jsx)("div",{style:{width:180,textAlign:"center",zIndex:999},children:Object(j.jsx)("div",{style:{fontWeight:"bold",margin:16,cursor:"pointer",height:96,backgroundImage:"url(".concat("/math","/recorder.png)"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onClick:function(){return n.play()}})})},L=D(S((function(e){var t=e.word,n=e.pickPanel;return Object(j.jsxs)("div",{className:"word",children:[Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)("div",{className:"word-picture",style:{backgroundImage:"url(".concat("/math","/wild-animals/").concat(t,"-150x150.png)")}}),Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(j.jsx)(A,{word:t}),Object(j.jsx)(H,{word:t})]})]}),Object(j.jsx)("div",{className:"word-panel",children:Object(m.a)(t.toUpperCase()).map((function(e,t){return Object(j.jsx)(T,{onDragOver:function(e){return e.preventDefault()},onDrop:function(t){var r=t.currentTarget;r.valid=e,n(r)}},t)}))})]})}))),C=D(x((function(e){var t=o.a.useState(0),n=Object(b.a)(t,2),a=(n[0],n[1],e.finished,e.session),i=(e.digitPanel,e.targetPanel,e.updateScore,o.a.useMemo((function(){return r.WILD_ANIMALS[g.random(0,r.WILD_ANIMALS.length)]}),[a]));return Object(j.jsxs)("div",{children:[Object(j.jsx)(E,{}),Object(j.jsx)(L,{word:i})]},a)})));n(23),n(24);!function(e){var t;!function(e){e[e.MATH=0]="MATH",e[e.ENGLISH=1]="ENGLISH"}(t||(t={})),e.ETypes=t;var n=[],a=h()({currentPage:t.MATH,results:[],penalty:0,finished:!1,random:g.shuffleGenerator(r.IMAGES.length)}),i=Object(p.connect)((function(e){return{currentPage:e.currentPage}}),(function(e,t){return{push:function(t,r){var a=t.currentPage;n.push(a),e.setState({currentPage:r})},pop:function(t){var r=n.pop();e.setState({currentPage:r})}}}))((function(e){return function(e){var n;return n={},Object(l.a)(n,t.MATH,Object(j.jsx)(M,Object(u.a)({},e),"PageMath")),Object(l.a)(n,t.ENGLISH,Object(j.jsx)(C,Object(u.a)({},e),"PageEnglish")),n}(e)[e.currentPage]}));e.Display=function(){return Object(j.jsx)(p.Provider,{store:a,children:Object(j.jsx)(i,{})})}}(_||(_={}));n(25);var R=function(){return Object(j.jsx)(_.Display,{})},N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};s.a.render(Object(j.jsx)(R,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/math",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/math","/service-worker.js");N?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):W(t,e)}))}}(),G()}},[[26,1,2]]]);
//# sourceMappingURL=main.1be80028.chunk.js.map