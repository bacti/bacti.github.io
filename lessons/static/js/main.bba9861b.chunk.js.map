{"version":3,"sources":["common/utils.ts","common/defines.ts","common/asset.ts","common/redux.ts","common/tracking.ts","common/dictionary.ts","pages/PageLoading.tsx","components/CompLetter.tsx","components/CompAlphabet.tsx","components/CompLetterPanel.tsx","pages/PageProfile.tsx","pages/PageSubject.tsx","components/CompDigit.tsx","components/CompEvaluation.tsx","components/CompDigitPanel.tsx","components/CompNumber.tsx","components/CompOperand.tsx","components/CompAddition.tsx","components/CompMultiplication.tsx","pages/PageCalculation.tsx","common/voice.ts","components/CompSpeaker.tsx","components/CompRecorder.tsx","pages/index.tsx","components/CompWord.tsx","pages/PageEnglish.tsx","pages/PageMusic.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx","proto/asset_pb.js","proto/dictionary_pb.js","proto/voice_pb.js","proto/asset_pb_service.js","proto/dictionary_pb_service.js","proto/voice_pb_service.js","DragDropTouch.js"],"names":["IMAGES","WILD_ANIMALS","shuffleGenerator","message","log","window","performance","now","toFixed","String","console","warn","logdiv","document","getElementById","innerText","element","request","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","apply","size","pool","Array","map","_","i","poolRandom","length","sort","Math","random","pop","min","max","validDigit","updateScore","digitElement","cloneNode","check","style","background","ondragend","event","panel","createElement","className","target","replaceWith","valid","Util","connectDigit","connect","digitPanel","store","props","selectPanel","state","setState","targetPanel","connectLetter","pickPanel","connectEvaluation","session","results","penalty","timer","finished","newSession","updateTimer","Date","updateResult","index","value","increment","submit","HOST","URL","webkitURL","TYPES","svg","mp3","POOL","uri","a","external","match","extention","type","AssetRequest","setUri","setExternal","Promise","resolve","grpc","unary","asset","fetch","host","onEnd","status","getData","data","JSZip","loadAsync","zip","file","async","buffer","createObjectURL","Blob","Asset","ETypes","client","amplitude","getInstance","init","storage","localStorage","anoId","uuid","v4","setUserId","user","getItem","logEvent","Tracking","PageLoading","push","React","useMemo","t","IMPRESSION","FONTS","family","source","all","FontFace","font","load","fonts","add","then","ENGAGEMENT","loading","Page","PROFILE","catch","width","height","backgroundColor","CompLetter","letter","draggable","onDragStart","onDragEnd","CompAlphabet","innerHTML","appendChild","cloneLetter","display","flexFlow","position","zIndex","CompLetterPanel","onDragOver","onDrop","useState","setAsset","next","backgroundImage","PageProfile","username","setUsername","currentUser","formatter","text","letters","join","replace","trim","useEffect","SUBJECT","paddingTop","preventDefault","currentTarget","fontSize","fontWeight","margin","padding","border","cursor","pointerEvents","onClick","setItem","toLowerCase","PageSubject","SUBJECTS","CALCULATION","ENGLISH","MUSIC","flexDirection","justifyContent","alignItems","Object","entries","subject","page","textAlign","minWidth","marginTop","CompDigit","digit","CompEvaluation","evaluation","ceil","reduce","mark","result","top","right","paddingRight","backgroundSize","backgroundRepeat","backgroundPosition","REFRESH","score","playing","fontFamily","color","SUBMIT","CompDigitPanel","CompNumber","mask","number","useRef","repeat","slice","ref","isFinite","CompOperand","id","operand","refresh","borderColor","valueText","RegExp","CompAddition","operands","operandFirst","operandSecond","operator","maxdigit","trail","ndigit","operandize","CompMultiplication","factors","product","factor","Number","PageCalculation","problems","offset","multiply","problem","Dictionary","word","DictRequest","setWord","dictionary","lookup","getWord","phonetics","getPhoneticsList","phonetic","getText","audio","getAudio","CompSpeaker","icon","setIcon","setAudio","wordIndex","url","blob","sound","Howl","src","format","preload","play","Voice","VoiceData","setBuffer","voice","predict","getWordsList","transcript","getTranscript","confidence","getConfidence","CompRecorder","icons","setIcons","recording","setRecording","predictedWord","recorderEl","chunks","navigator","mediaDevices","getUserMedia","stream","recorder","MediaRecorder","ondataavailable","e","Response","arrayBuffer","Uint8Array","onstop","initialize","start","setTimeout","stop","CompWord","image","setImage","info","toUpperCase","PageEnglish","PageMusic","sheet","abcjs","renderAbc","current","responsive","visualObj","synth","supportsAudio","audioContext","AudioContext","resume","midiBuffer","CreateSynth","millisecondsPerMeasure","prime","stack","createStore","currentPage","LOADING","Content","previous","pages","App","Display","Boolean","location","hostname","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","serviceWorker","ready","registration","unregister","error","jspb","require","goog","global","exportSymbol","proto","opt_data","Message","this","inherits","DEBUG","COMPILED","displayName","GENERATE_TO_OBJECT","prototype","toObject","opt_includeInstance","includeInstance","msg","obj","getFieldWithDefault","$jspbMessageInstance","deserializeBinary","bytes","reader","BinaryReader","deserializeBinaryFromReader","nextField","isEndGroup","getFieldNumber","readString","readBool","skipField","serializeBinary","writer","BinaryWriter","serializeBinaryToWriter","getResultBuffer","f","undefined","getUri","writeString","getExternal","writeBool","setProto3StringField","setProto3BooleanField","AssetResponse","getData_asB64","readBytes","setData","getData_asU8","writeBytes","bytesAsB64","bytesAsU8","setProto3BytesField","object","extend","exports","DictResponse","repeatedFields_","phoneticsList","toObjectList","Phonetic","readMessage","addPhonetics","writeRepeatedMessage","getRepeatedWrapperField","setPhoneticsList","setRepeatedWrapperField","opt_value","opt_index","addToRepeatedWrapperField","clearPhoneticsList","setText","getBuffer_asB64","getBuffer_asU8","getBuffer","VoiceInfo","wordsList","Word","addWords","setWordsList","clearWordsList","setTranscript","readFloat","setConfidence","writeFloat","setProto3FloatField","proto_asset_pb","serviceName","assetClient","serviceHost","options","methodName","service","requestStream","responseStream","requestType","responseType","requestMessage","metadata","callback","arguments","transport","debug","response","Code","OK","err","Error","statusMessage","code","trailers","cancel","close","proto_dictionary_pb","dictionaryClient","proto_voice_pb","voiceClient","DragDropTouch","DragDropTouch_1","DataTransfer","_dropEffect","_effectAllowed","_data","defineProperty","get","set","enumerable","configurable","keys","clearData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","_lastClick","supportsPassive","addEventListener","d","ts","_touchstart","bind","tm","_touchmove","te","_touchend","opt","passive","capture","_this","_shouldHandle","_DBLCLICK","_dispatchEvent","_reset","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","touches","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","clearInterval","pageX","clientX","pageY","clientY","p","abs","pt","el","elementFromPoint","getComputedStyle","parentElement","_copyStyle","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","removeChild","requestAnimationFrame","s","round","_copyProps","dst","_rmvAtts","forEach","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","getContext","drawImage","cs","key","children","evt","createEvent","initEvent","button","which","buttons","_kbdProps","_ptProps","dataTransfer","dispatchEvent","hasAttribute","split"],"mappings":"uLAAO,E,uFCCMA,EAAS,CACpB,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,mBACA,kBACA,oBACA,oBACA,sBACA,iBACA,gBACA,oBACA,gBACA,gBACA,qBACA,qBACA,kBACA,gBACA,kBACA,qBACA,uBACA,iBACA,kBACA,uBACA,kBACA,gBACA,mBACA,mBACA,iBACA,gBACA,wBACA,oBACA,mBACA,qBACA,mBACA,mBACA,eACA,UACA,sBACA,WAGWC,EAAe,CAC1B,YACA,WACA,OACA,QACA,aACA,SACA,OACA,YACA,UACA,WACA,UACA,UACA,YACA,QACA,UACA,OACA,SACA,MACA,QACA,UACA,QACA,WACA,SACA,OACA,aACA,QACA,SACA,MACA,OACA,MACA,MACA,OACA,OACA,WAEA,WACA,SACA,OACA,QACA,SACA,MACA,WACA,QACA,WACA,Q,mDDxGiBC,GAhBC,QAAG,SAACC,GACpB,IAAMC,EAAG,WAAOC,OAAOC,YAAYC,MAAQ,KAAMC,QAAQ,GAAhD,aAAuDC,OAAON,GAA9D,MACTO,QAAQC,KAAKP,GACb,IAAMQ,EAASC,SAASC,eAAe,OACvCF,IAAWA,EAAOG,UAAYX,EAAMQ,EAAOG,YAGf,oBAAG,SAACC,GAChC,IAAMC,EACJD,EAAQE,mBACRF,EAAQG,yBACRH,EAAQI,sBACRJ,EAAQK,oBACVJ,GAAWA,EAAQK,MAAMN,IAGpB,SAAUd,EAAiBqB,GAA3B,yEACCC,EAAO,YAAIC,MAAMF,IAAOG,KAAI,SAACC,EAAGC,GAAJ,OAAUA,KACxCC,EAAuB,GAFtB,OAOH,OAH0B,IAAtBA,EAAWC,SACbD,EAAa,YAAIL,GAAMO,MAAK,kBAAMC,KAAKC,SAAW,OALjD,SAOGJ,EAAWK,MAPd,6D,qBAWY,SAAG,SAACC,EAAaC,GAAd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","file":"static/js/main.bba9861b.chunk.js","sourcesContent":["export namespace Util {\r\n  export const trace = (message: any) => {\r\n    const log = `${(window.performance.now() / 1000).toFixed(3)}: ${String(message)}\\n`;\r\n    console.warn(log);\r\n    const logdiv = document.getElementById('log');\r\n    logdiv && (logdiv.innerText = log + logdiv.innerText);\r\n  };\r\n\r\n  export const requestFullscreen = (element: any) => {\r\n    const request =\r\n      element.requestFullscreen ||\r\n      element.webkitRequestFullscreen ||\r\n      element.mozRequestFullScreen ||\r\n      element.msRequestFullscreen;\r\n    request && request.apply(element);\r\n  };\r\n\r\n  export function* shuffleGenerator(size: number) {\r\n    const pool = [...Array(size)].map((_, i) => i);\r\n    let poolRandom: number[] = [];\r\n    while (true) {\r\n      if (poolRandom.length === 0) {\r\n        poolRandom = [...pool].sort(() => Math.random() - 0.5);\r\n      }\r\n      yield poolRandom.pop();\r\n    }\r\n  }\r\n\r\n  export const random = (min: number, max: number) => ~~(Math.random() * (max - min)) + min;\r\n\r\n  export const cloneDigit = (element: any, validDigit: string, updateScore: any) => {\r\n    const digitElement = element.cloneNode(true);\r\n    const check = digitElement.innerText === validDigit;\r\n    digitElement.style.background = check ? 'green' : 'red';\r\n    digitElement.ondragend = (event: any) => {\r\n      const panel = document.createElement('div');\r\n      panel.className = 'digit-panel';\r\n      event.target.replaceWith(panel);\r\n    };\r\n    updateScore(~~check - 1);\r\n    return digitElement;\r\n  };\r\n\r\n  export const cloneLetter = (element: any, valid: string, updateScore: any) => {\r\n    const digitElement = element.cloneNode(true);\r\n    const check = digitElement.innerText === valid;\r\n    digitElement.style.background = check ? 'green' : 'red';\r\n    digitElement.ondragend = (event: any) => {\r\n      const panel = document.createElement('div');\r\n      panel.className = 'letter-panel';\r\n      event.target.replaceWith(panel);\r\n    };\r\n    updateScore(~~check - 1);\r\n    return digitElement;\r\n  };\r\n}\r\n","export const HOST = 'https://bacti.tk:8080';\r\nexport const IMAGES = [\r\n  'character-0.png',\r\n  'character-1.svg',\r\n  'character-2.svg',\r\n  'character-3.svg',\r\n  'character-4.svg',\r\n  'character-5.png',\r\n  'character-6.png',\r\n  'character-7.png',\r\n  'character-8.png',\r\n  'character-9.png',\r\n  'character-10.png',\r\n  'character-11.png',\r\n  'character-12.png',\r\n  'character-13.png',\r\n  'character-14.png',\r\n  'character-15.png',\r\n  'character-16.png',\r\n  'character-17.png',\r\n  'character-18.png',\r\n  'character-19.png',\r\n  'character-20.png',\r\n  'character-21.png',\r\n  'character-22.png',\r\n  'character-23.png',\r\n  'character-24.png',\r\n  'character-25.png',\r\n  'character-26.png',\r\n  'character-27.svg',\r\n  'character-28.png',\r\n  'character-29.png',\r\n  'character-30.png',\r\n  'character-31.png',\r\n  'character-32.png',\r\n  'character-33.png',\r\n  'character-34.png',\r\n  'character-35.png',\r\n  'character-36.png',\r\n  'tamako-nobi.png',\r\n  'tamako-nobi-2.png',\r\n  'nobisuke-nobi.png',\r\n  'edmond-elephant.png',\r\n  'suzy-sheep.png',\r\n  'chloe-pig.png',\r\n  'alexander-pig.png',\r\n  'candy-cat.png',\r\n  'danny-dog.png',\r\n  'rebecca-rabbit.png',\r\n  'richard-rabbit.png',\r\n  'miss-rabbit.png',\r\n  'zoe-zebra.png',\r\n  'pedro-horse.png',\r\n  'madame-gazelle.png',\r\n  'eiichirou-senjou.png',\r\n  'hodol-choe.png',\r\n  'jaiko-gouda.png',\r\n  'michiko-minamoto.png',\r\n  'mr-kaminari.png',\r\n  'mrs-gouda.png',\r\n  'mrs-honekawa.png',\r\n  'nanhyang-gim.png',\r\n  'granny-dog.png',\r\n  'mummy-dog.png',\r\n  'captain-daddy-dog.png',\r\n  'grampy-rabbit.png',\r\n  'daddy-rabbit.png',\r\n  'gabriella-goat.png',\r\n  'chuck-canary.png',\r\n  'jay-bluebird.png',\r\n  'king-pig.png',\r\n  'kyu.png',\r\n  'matilda-chicken.png',\r\n  'myu.png',\r\n];\r\n\r\nexport const WILD_ANIMALS = [\r\n  'alligator',\r\n  'antelope',\r\n  'bear',\r\n  'camel',\r\n  'chimpanzee',\r\n  'coyote',\r\n  'crab',\r\n  'crocodile',\r\n  'dolphin',\r\n  'elephant',\r\n  'giraffe',\r\n  'gorilla',\r\n  'jellyfish',\r\n  'koala',\r\n  'leopard',\r\n  'lion',\r\n  'monkey',\r\n  'owl',\r\n  'panda',\r\n  'raccoon',\r\n  'shark',\r\n  'starfish',\r\n  'walrus',\r\n  'wolf',\r\n  'woodpecker',\r\n  'zebra',\r\n  'badger',\r\n  'bat',\r\n  'deer',\r\n  'elk',\r\n  'fox',\r\n  'frog',\r\n  'hare',\r\n  'hedgehog',\r\n  // 'hippopotamus',\r\n  'kangaroo',\r\n  'lizard',\r\n  'mole',\r\n  'otter',\r\n  'rabbit',\r\n  'rat',\r\n  'reindeer',\r\n  'snake',\r\n  'squirrel',\r\n  'toad',\r\n];\r\n\r\nexport const SIZE = 20;\r\nexport const MIN = 10;\r\nexport const MAX = 100;\r\nexport const MULTIPLY = 2;\r\n","import JSZip from 'jszip';\r\nimport { grpc } from '@improbable-eng/grpc-web';\r\nimport { asset } from '../proto/asset_pb_service';\r\nimport { AssetRequest } from '../proto/asset_pb';\r\n\r\nexport namespace Asset {\r\n  const HOST = 'https://bacti.tk:8080';\r\n  const URL = window.URL || window.webkitURL;\r\n  const TYPES: any = {\r\n    svg: 'image/svg+xml',\r\n    mp3: 'audio/mpeg',\r\n  };\r\n  const POOL: any = {};\r\n\r\n  export const fetch = async (uri: string, external: boolean = false): Promise<string | null> => {\r\n    const [_, extention] = uri.match(/\\.(\\w+)$/i) || [];\r\n    const type = TYPES[extention];\r\n\r\n    if (POOL[uri]) {\r\n      return POOL[uri];\r\n    }\r\n    const request = new AssetRequest();\r\n    request.setUri(uri);\r\n    request.setExternal(external);\r\n\r\n    const data: Uint8Array = await new Promise((resolve) =>\r\n      grpc.unary(asset.fetch, {\r\n        request,\r\n        host: HOST,\r\n        onEnd: ({ message, status }: any) => resolve(status ? null : message.getData()),\r\n      })\r\n    );\r\n    if (data == null) return null;\r\n\r\n    const zip = await JSZip.loadAsync(data);\r\n    const buffer: any = await zip.file(uri)?.async('arraybuffer');\r\n    POOL[uri] = URL.createObjectURL(new Blob([buffer], { type }));\r\n    return POOL[uri];\r\n  };\r\n}\r\n","import { connect } from 'redux-zero/react';\r\nimport { Util } from '../common/utils';\r\nimport { IMAGES } from '../common/defines';\r\n\r\nexport const connectDigit = connect(\r\n  ({ panel, digitPanel }: any) => ({ panel, digitPanel }),\r\n  (store: any, props: any) => ({\r\n    selectPanel: (state: any, panel: any) => store.setState({ panel }),\r\n    targetPanel: (state: any, digitPanel: any) => {\r\n      store.setState({ digitPanel });\r\n    },\r\n  })\r\n);\r\n\r\nexport const connectLetter = connect(\r\n  ({ panel }: any) => ({ panel }),\r\n  (store: any, props: any) => ({\r\n    pickPanel: (state: any, panel: any) => {\r\n      store.setState({ panel });\r\n    },\r\n  })\r\n);\r\n\r\nexport const connectEvaluation = connect(\r\n  ({ session, random, results, penalty, timer, finished }: any) => ({\r\n    session,\r\n    random,\r\n    results,\r\n    penalty,\r\n    timer,\r\n    finished,\r\n  }),\r\n  (store: any, props: any) => ({\r\n    newSession: (state: any) =>\r\n      store.setState({\r\n        session: Math.random(),\r\n        penalty: 0,\r\n        finished: false,\r\n        random: Util.shuffleGenerator(IMAGES.length),\r\n      }),\r\n    updateTimer: (state: any) => store.setState({ timer: Date.now() }),\r\n    updateResult: ({ results }: any, index: number, value: boolean) => {\r\n      results[index] = value;\r\n      store.setState({ results });\r\n    },\r\n    updateScore: ({ penalty }: any, increment: number) => {\r\n      store.setState({ penalty: penalty + increment });\r\n    },\r\n    submit: ({ penalty }: any, increment: number) => {\r\n      store.setState({ penalty: penalty + increment, finished: true });\r\n    },\r\n  })\r\n);\r\n","import amplitude from 'amplitude-js';\r\nimport uuid from 'uuid';\r\n\r\nexport namespace Tracking {\r\n  export enum ETypes {\r\n    IMPRESSION = 'IMPRESSION',\r\n    ENGAGEMENT = 'ENGAGEMENT',\r\n    SUBMIT = 'SUBMIT',\r\n    REFRESH = 'REFRESH',\r\n  }\r\n\r\n  interface ITrackingEvent {\r\n    event: string;\r\n    loading?: number;\r\n    playing?: number;\r\n    score?: number;\r\n  }\r\n\r\n  const API_KEY = 'e9d181173175fa90e6140967d58d18e0';\r\n  const client = amplitude.getInstance();\r\n  client.init(API_KEY);\r\n\r\n  const storage: any = window.localStorage || {};\r\n  storage.anoId = storage.anoId || uuid.v4();\r\n  client.setUserId(`ano:${storage.anoId}`);\r\n\r\n  export const logEvent = ({ event, ...data }: ITrackingEvent) => {\r\n    const user = window.localStorage.getItem('username');\r\n    client.logEvent(event, { ...data, user });\r\n  };\r\n}\r\n","import { grpc } from '@improbable-eng/grpc-web';\r\nimport { dictionary } from '../proto/dictionary_pb_service';\r\nimport { Phonetic, DictRequest } from '../proto/dictionary_pb';\r\nimport { HOST } from '../common/defines';\r\n\r\nexport namespace Dictionary {\r\n  export const lookup = async (word: string): Promise<any> => {\r\n    const request = new DictRequest();\r\n    request.setWord(word);\r\n\r\n    const data: any = await new Promise((resolve) =>\r\n      grpc.unary(dictionary.lookup, {\r\n        request,\r\n        host: HOST,\r\n        onEnd: ({ message, status }: any) => {\r\n          resolve(\r\n            status\r\n              ? null\r\n              : {\r\n                  word: message.getWord(),\r\n                  phonetics: message.getPhoneticsList().map((phonetic: Phonetic) => ({\r\n                    text: phonetic.getText(),\r\n                    audio: phonetic.getAudio(),\r\n                  })),\r\n                }\r\n          );\r\n        },\r\n      })\r\n    );\r\n    return data;\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Page, IPageProps } from '.';\r\nimport { connectDigit, connectEvaluation } from '../common/redux';\r\nimport { Asset } from '../common/asset';\r\nimport { Tracking } from '../common/tracking';\r\n\r\nconst FC: React.FC<IPageProps> = ({ push }) => {\r\n  React.useMemo(() => {\r\n    const t = Date.now();\r\n    Tracking.logEvent({ event: Tracking.ETypes.IMPRESSION });\r\n    (async () => {\r\n      const FONTS = [\r\n        {\r\n          family: 'Digit-Font',\r\n          source: 'fonts/HP001_5_hang_bold.ttf',\r\n        },\r\n        {\r\n          family: 'Letter-Font',\r\n          source: 'fonts/FineCollege.ttf',\r\n        },\r\n        {\r\n          family: 'SaucerBB',\r\n          source: 'fonts/SaucerBB.ttf',\r\n        },\r\n      ];\r\n\r\n      Promise.all(\r\n        FONTS.map(async ({ family, source }: any) => {\r\n          // @ts-ignore\r\n          const font = new FontFace(family, `url(${await Asset.fetch(source)})`);\r\n          await font.load();\r\n          // @ts-ignore\r\n          document.fonts.add(font);\r\n        })\r\n      )\r\n        .then(() => {\r\n          Tracking.logEvent({ event: Tracking.ETypes.ENGAGEMENT, loading: Date.now() - t });\r\n          push(Page.ETypes.PROFILE);\r\n        })\r\n        .catch(() => null);\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: '#000000',\r\n      }}\r\n    >\r\n      <div\r\n        className=\"loader\"\r\n        // className=\"lds-dual-ring\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const PageLoading = connectEvaluation(connectDigit(FC));\r\n","import React from 'react';\r\n\r\ninterface ICompDigitProps extends React.SVGProps<SVGSVGElement> {\r\n  letter: string;\r\n  draggable: boolean;\r\n  onDragStart?: any;\r\n  onDragEnd?: any;\r\n}\r\n\r\nexport const CompLetter: React.FC<ICompDigitProps> = ({ letter, draggable, onDragStart, onDragEnd, ...props }) => {\r\n  return (\r\n    <div draggable={draggable} onDragStart={onDragStart} onDragEnd={onDragEnd} className=\"letter\">\r\n      {letter}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { connectLetter, connectEvaluation } from '../common/redux';\r\nimport { Util } from '../common/utils';\r\nimport { CompLetter } from './CompLetter';\r\n\r\ninterface ICompAlphabetProps extends React.SVGProps<SVGSVGElement> {\r\n  finished: boolean;\r\n  panel: any;\r\n  pickPanel: any;\r\n  updateScore: any;\r\n  onDragEnd?: any;\r\n}\r\n\r\nconst FC: React.FC<ICompAlphabetProps> = ({\r\n  finished,\r\n  panel,\r\n  pickPanel,\r\n  updateScore,\r\n  onDragEnd = (event: any) => {\r\n    if (panel) {\r\n      panel.innerHTML = '';\r\n      panel.appendChild(Util.cloneLetter(event.target, panel.valid, updateScore));\r\n    }\r\n  },\r\n}) => {\r\n  return (\r\n    <div style={{ display: 'flex', flexFlow: 'wrap', position: 'fixed', backgroundColor: 'transparent', zIndex: 999 }}>\r\n      {[...'ABCDEFGHIJKLMNOPQRSTUVWXYZ'].map((i) => (\r\n        <CompLetter\r\n          key={i}\r\n          letter={i}\r\n          draggable={!finished}\r\n          onDragStart={(event: any) => pickPanel(null)}\r\n          onDragEnd={onDragEnd}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompAlphabet = connectEvaluation(connectLetter(FC));\r\n","import React from 'react';\r\nimport { Asset } from '../common/asset';\r\nimport { IMAGES } from '../common/defines';\r\nimport { connectEvaluation } from '../common/redux';\r\n\r\ninterface ICompLetterPanelProps extends React.SVGProps<SVGSVGElement> {\r\n  session: number;\r\n  random: any;\r\n  onDragOver: any;\r\n  onDrop: any;\r\n}\r\n\r\nconst FC: React.FC<ICompLetterPanelProps> = ({ session, random, onDragOver, onDrop, ...props }) => {\r\n  const [asset, setAsset] = React.useState<string | null>(null);\r\n  React.useMemo(() => {\r\n    (async () => setAsset(await Asset.fetch(`images/${IMAGES[random.next().value]}`)))();\r\n  }, [session]);\r\n\r\n  return (\r\n    <div onDragOver={onDragOver} onDrop={onDrop}>\r\n      <div\r\n        className=\"letter-panel\"\r\n        style={{\r\n          backgroundImage: `url(${asset})`,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompLetterPanel = connectEvaluation(FC);\r\n","import React from 'react';\r\nimport { Page, IPageProps } from '.';\r\nimport { CompLetter } from '../components/CompLetter';\r\nimport { CompAlphabet } from '../components/CompAlphabet';\r\nimport { CompLetterPanel } from '../components/CompLetterPanel';\r\nimport { connectLetter } from '../common/redux';\r\n\r\ninterface IPageProfileProps extends IPageProps {\r\n  panel: any;\r\n  pickPanel: any;\r\n}\r\n\r\nconst FC: React.FC<IPageProfileProps> = ({ panel, push, pickPanel }) => {\r\n  const [username, setUsername] = React.useState('   ');\r\n  const currentUser = window.localStorage.getItem('username');\r\n  const formatter = (text: string, letter: string, index: number) => {\r\n    const letters = [...text];\r\n    letters[index] = letter;\r\n    return `  ${letters.join('').replace(/(\\s+)/g, ' ').trim()}  `;\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser) {\r\n      push(Page.ETypes.SUBJECT);\r\n    }\r\n  }, []);\r\n\r\n  if (currentUser) return null;\r\n  return (\r\n    <div>\r\n      <CompAlphabet\r\n        onDragEnd={(event: any) => {\r\n          if (!panel) return;\r\n          setUsername(formatter(username, event.target.innerText, panel.index));\r\n        }}\r\n      />\r\n      <div className=\"word\">\r\n        <div className=\"word-panel\" style={{ paddingTop: 100 }}>\r\n          {[...username].map((letter, i) =>\r\n            letter == ' ' ? (\r\n              <CompLetterPanel\r\n                key={i}\r\n                onDragOver={(event: any) => event.preventDefault()}\r\n                onDrop={(event: any) => {\r\n                  const panel = event.currentTarget;\r\n                  panel.index = i;\r\n                  pickPanel(panel);\r\n                }}\r\n              />\r\n            ) : (\r\n              <CompLetter\r\n                key={i}\r\n                letter={letter}\r\n                draggable={true}\r\n                onDragEnd={(event: any) => {\r\n                  setUsername(formatter(username, ' ', i));\r\n                }}\r\n              />\r\n            )\r\n          )}\r\n        </div>\r\n        <div\r\n          style={{\r\n            fontSize: 'x-large',\r\n            fontWeight: 'bold',\r\n            backgroundColor: 'yellow',\r\n            margin: 40,\r\n            padding: '16px 53px',\r\n            border: '4px solid blue',\r\n            cursor: 'pointer',\r\n            pointerEvents: 'auto',\r\n          }}\r\n          onClick={() => {\r\n            window.localStorage.setItem('username', username.toLowerCase().trim());\r\n            push(Page.ETypes.SUBJECT);\r\n          }}\r\n        >\r\n          SAVE\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const PageProfile = connectLetter(FC);\r\n","import React from 'react';\r\nimport { Page, IPageProps } from '.';\r\nimport { connectDigit, connectEvaluation } from '../common/redux';\r\nimport { Asset } from '../common/asset';\r\nimport { Tracking } from '../common/tracking';\r\n\r\nexport const PageSubject: React.FC<IPageProps> = ({ push }) => {\r\n  const SUBJECTS = {\r\n    CALCULATION: Page.ETypes.CALCULATION,\r\n    ENGLISH: Page.ETypes.ENGLISH,\r\n    MUSIC: Page.ETypes.MUSIC,\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          height: '100vh',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        {Object.entries(SUBJECTS).map(([subject, page]) => (\r\n          <div\r\n            key={subject}\r\n            style={{\r\n              fontSize: 'xx-large',\r\n              fontWeight: 'bold',\r\n              textAlign: 'center',\r\n              backgroundColor: 'yellow',\r\n              minWidth: '28%',\r\n              marginTop: 40,\r\n              padding: 12,\r\n              border: '2px solid blue',\r\n              cursor: 'pointer',\r\n            }}\r\n            onClick={() => push(page)}\r\n          >\r\n            {subject}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\ninterface ICompDigitProps extends React.SVGProps<SVGSVGElement> {\r\n  digit: number;\r\n  draggable: boolean;\r\n  onDragStart?: any;\r\n  onDragEnd?: any;\r\n}\r\n\r\nexport const CompDigit: React.FC<ICompDigitProps> = (props) => {\r\n  const { digit, draggable, onDragStart, onDragEnd, style } = props;\r\n  return (\r\n    <div draggable={draggable} onDragStart={onDragStart} onDragEnd={onDragEnd} style={style} className=\"digit\">\r\n      {digit}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { connectEvaluation } from '../common/redux';\r\nimport { Asset } from '../common/asset';\r\nimport { Tracking } from '../common/tracking';\r\n\r\ninterface ICompEvaluationProps extends React.SVGProps<SVGSVGElement> {\r\n  finished: boolean;\r\n  results: any;\r\n  timer: any;\r\n  penalty: any;\r\n  newSession: any;\r\n  submit: any;\r\n}\r\n\r\nconst FC: React.FC<ICompEvaluationProps> = (props) => {\r\n  const { results, timer, penalty, newSession, finished, submit } = props;\r\n  const [asset, setAsset] = React.useState<string | null>(null);\r\n  const username = React.useMemo(() => {\r\n    (async () => setAsset(await Asset.fetch('reset.png')))();\r\n    return window.localStorage.getItem('username');\r\n  }, []);\r\n\r\n  const evaluation = () =>\r\n    Math.ceil(\r\n      results.reduce((mark: number, result: boolean) => {\r\n        return mark + (100 / results.length) * ~~result;\r\n      }, 0)\r\n    );\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 200,\r\n        right: 0,\r\n        width: 180,\r\n        paddingRight: 40,\r\n        textAlign: 'center',\r\n        zIndex: 999,\r\n      }}\r\n    >\r\n      <div className=\"user\">{username}</div>\r\n      <div\r\n        style={{\r\n          fontWeight: 'bold',\r\n          margin: 16,\r\n          cursor: 'pointer',\r\n          height: 96,\r\n          backgroundImage: `url(${asset})`,\r\n          backgroundSize: 'contain',\r\n          backgroundRepeat: 'no-repeat',\r\n          backgroundPosition: 'center',\r\n        }}\r\n        onClick={() => {\r\n          Tracking.logEvent({\r\n            event: Tracking.ETypes.REFRESH,\r\n            score: evaluation(),\r\n            playing: Date.now() - timer,\r\n          });\r\n          newSession();\r\n        }}\r\n      />\r\n\r\n      <div\r\n        style={{\r\n          fontFamily: 'SaucerBB',\r\n          fontSize: 80,\r\n          color: finished ? 'red' : 'grey',\r\n        }}\r\n      >\r\n        {100 + penalty}\r\n      </div>\r\n      <div\r\n        style={{\r\n          fontWeight: 'bold',\r\n          backgroundColor: 'yellow',\r\n          padding: 4,\r\n          border: '2px solid blue',\r\n          cursor: 'pointer',\r\n          pointerEvents: finished ? 'none' : 'auto',\r\n        }}\r\n        onClick={() => {\r\n          const score = evaluation();\r\n          Tracking.logEvent({ event: Tracking.ETypes.SUBMIT, score: score + penalty, playing: Date.now() - timer });\r\n          submit(score - 100);\r\n        }}\r\n      >\r\n        SUBMIT\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompEvaluation = connectEvaluation(FC);\r\n","import React from 'react';\r\nimport { Asset } from '../common/asset';\r\nimport { IMAGES } from '../common/defines';\r\nimport { connectEvaluation } from '../common/redux';\r\n\r\ninterface ICompDigitPanelProps extends React.SVGProps<SVGSVGElement> {\r\n  session: number;\r\n  random: any;\r\n  onDragOver: any;\r\n  onDrop: any;\r\n}\r\n\r\nconst FC: React.FC<ICompDigitPanelProps> = ({ session, random, onDragOver, onDrop, ...props }) => {\r\n  const [asset, setAsset] = React.useState<string | null>(null);\r\n  React.useMemo(() => {\r\n    (async () => setAsset(await Asset.fetch(`images/${IMAGES[random.next().value]}`)))();\r\n  }, [session]);\r\n\r\n  return (\r\n    <div onDragOver={onDragOver} onDrop={onDrop}>\r\n      <div\r\n        className=\"digit-panel\"\r\n        style={{\r\n          backgroundImage: `url(${asset})`,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompDigitPanel = connectEvaluation(FC);\r\n","import React from 'react';\r\nimport { connectDigit } from '../common/redux';\r\nimport { CompDigit } from './CompDigit';\r\nimport { CompDigitPanel } from './CompDigitPanel';\r\n\r\ninterface ICompOperandProps extends React.SVGProps<SVGSVGElement> {\r\n  value: string;\r\n  mask?: string;\r\n  targetPanel: any;\r\n}\r\n\r\nconst FC: React.FC<ICompOperandProps> = ({ value, mask = value, targetPanel, ...props }) => {\r\n  const number = React.useRef<HTMLDivElement>(null);\r\n  value = ('x'.repeat(mask.length) + value).slice(-mask.length);\r\n  // console.log({ value, mask });\r\n\r\n  return (\r\n    <div ref={number} style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n      {[...mask].map((digit, i) =>\r\n        isFinite(+digit) ? (\r\n          <CompDigit key={i} digit={+digit} draggable={false} />\r\n        ) : (\r\n          <CompDigitPanel\r\n            key={i}\r\n            onDragOver={(event: any) => event.preventDefault()}\r\n            onDrop={(event: any) =>\r\n              targetPanel({\r\n                validDigit: value[i],\r\n                panel: event.currentTarget,\r\n              })\r\n            }\r\n          />\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompNumber = connectDigit(FC);\r\n","import React from 'react';\r\nimport { connectDigit, connectEvaluation } from '../common/redux';\r\nimport { CompDigit } from './CompDigit';\r\nimport { CompDigitPanel } from './CompDigitPanel';\r\n\r\nexport interface IOperand {\r\n  value: string;\r\n  text: string;\r\n  mask: string;\r\n}\r\n\r\ninterface ICompOperandProps extends React.SVGProps<SVGSVGElement> {\r\n  finished: boolean;\r\n  operand: any;\r\n  selectPanel: any;\r\n  updateResult: any;\r\n}\r\n\r\nconst FC: React.FC<ICompOperandProps> = ({ id, finished, operand, selectPanel, updateResult }) => {\r\n  const [_, refresh] = React.useState(0);\r\n  const number = React.useRef<HTMLDivElement>(null);\r\n  const { value, text, mask } = operand;\r\n  const panel = (digit: string, i: number) => {\r\n    if (isFinite(+digit)) {\r\n      return <CompDigit key={i} digit={+digit} draggable={false} />;\r\n    }\r\n    if (digit == 'z') {\r\n      return <div key={i} className=\"digit-panel\" style={{ borderColor: 'black' }} />;\r\n    }\r\n    if (text[i] == ' ') {\r\n      return (\r\n        <CompDigitPanel\r\n          key={i}\r\n          onDragOver={(event: any) => event.preventDefault()}\r\n          onDrop={(event: any) =>\r\n            selectPanel({\r\n              operand,\r\n              index: i,\r\n            })\r\n          }\r\n        />\r\n      );\r\n    }\r\n    const valueText = (' '.repeat(text.length) + String(value)).slice(-text.length);\r\n    return (\r\n      <CompDigit\r\n        key={i}\r\n        digit={+text[i]}\r\n        style={{\r\n          background: valueText[i] === text[i] ? 'green' : 'red',\r\n        }}\r\n        draggable={!finished}\r\n        onDragEnd={(event: any) => {\r\n          operand.text = text.replace(new RegExp(`(.{${i}})(.)`, 'i'), '$1 ');\r\n          refresh(Math.random());\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    (async () => updateResult(id, value === text))();\r\n  });\r\n\r\n  return (\r\n    <div ref={number} style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n      {[...mask].map(panel)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompOperand = connectEvaluation(connectDigit(FC));\r\n","import React from 'react';\r\nimport { connectEvaluation } from '../common/redux';\r\nimport { CompNumber } from './CompNumber';\r\nimport { IOperand, CompOperand } from './CompOperand';\r\n\r\ninterface ICompAdditionProps extends React.SVGProps<SVGSVGElement> {\r\n  operands: number[];\r\n}\r\n\r\nconst FC: React.FC<ICompAdditionProps> = ({ id, operands }) => {\r\n  const [operandFirst, operandSecond] = operands;\r\n  const [operator, result] = React.useMemo(() => {\r\n    const operandize = (value: string, maxdigit: number, trail: number) => {\r\n      const ndigit = Math.max(value.length - trail, maxdigit);\r\n      return {\r\n        value: (' '.repeat(ndigit) + value).slice(-ndigit) + '0'.repeat(trail),\r\n        text: ' '.repeat(ndigit) + '0'.repeat(trail),\r\n        mask: 'x'.repeat(ndigit) + 'z'.repeat(trail),\r\n      };\r\n    };\r\n\r\n    const operator = operandFirst > operandSecond ? '-' : '+';\r\n    const result = {\r\n      '+': operandFirst + operandSecond,\r\n      '-': operandFirst - operandSecond,\r\n    }[operator];\r\n    return [operator, operandize(String(result), 3, 0)];\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"calculation\" style={{ background: 'transparent' }}>\r\n      <CompNumber value={String(operandFirst)} />\r\n      <div className=\"operator\">{operator}</div>\r\n      <CompNumber value={String(operandSecond)} />\r\n      <div className=\"horizontal-line\">==</div>\r\n      <CompOperand id={id} operand={result} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompAddition = connectEvaluation(FC);\r\n","import React from 'react';\r\nimport { connectEvaluation } from '../common/redux';\r\nimport { CompNumber } from './CompNumber';\r\nimport { IOperand, CompOperand } from './CompOperand';\r\n\r\ninterface ICompMultiplicationProps extends React.SVGProps<SVGSVGElement> {\r\n  operands: number[];\r\n}\r\n\r\nconst FC: React.FC<ICompMultiplicationProps> = ({ id, operands }) => {\r\n  const summandFirst = React.useRef<HTMLDivElement>(null);\r\n  const summandSecond = React.useRef<HTMLDivElement>(null);\r\n  const sum = React.useRef<HTMLDivElement>(null);\r\n  const [operandFirst, operandSecond] = operands;\r\n\r\n  const [factors, product] = React.useMemo(() => {\r\n    const operandize = (value: string, maxdigit: number, trail: number) => {\r\n      const ndigit = Math.max(value.length - trail, maxdigit);\r\n      return {\r\n        value: (' '.repeat(ndigit) + value).slice(-ndigit) + '0'.repeat(trail),\r\n        text: ' '.repeat(ndigit) + '0'.repeat(trail),\r\n        mask: 'x'.repeat(ndigit) + 'z'.repeat(trail),\r\n      };\r\n    };\r\n    const factors: IOperand[] = [...String(operandFirst)].map<IOperand>((_, i) => {\r\n      const value = String(operandSecond * ~~((operandFirst / 10 ** i) % 10));\r\n      const ndigit = Math.max(value.length - i, 2);\r\n      return operandize(value, ndigit, i);\r\n    });\r\n    return [factors, operandize(String(operandFirst * operandSecond), 3, 0)];\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"calculation\" style={{ background: 'transparent' }}>\r\n      <CompNumber value={String(operandFirst)} />\r\n      <div className=\"operator\">&#x00d7;</div>\r\n      <CompNumber value={String(operandSecond)} />\r\n      <div className=\"horizontal-line\">==</div>\r\n      {factors.map((factor: IOperand, i: number) => (\r\n        <CompOperand key={i} id={Number(id) + i} operand={factor} />\r\n      ))}\r\n      <div className=\"horizontal-line\">==</div>\r\n      <CompOperand id={Number(id) + 2} operand={product} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompMultiplication = connectEvaluation(FC);\r\n","import React, { SVGProps, useState, useEffect } from 'react';\r\nimport { connect } from 'redux-zero/react';\r\nimport Draggable from 'react-draggable';\r\nimport { IPageProps } from '.';\r\nimport { CompDigit } from '../components/CompDigit';\r\nimport { CompEvaluation } from '../components/CompEvaluation';\r\nimport { CompAddition } from '../components/CompAddition';\r\nimport { CompMultiplication } from '../components/CompMultiplication';\r\nimport { connectDigit, connectEvaluation } from '../common/redux';\r\nimport { Util } from '../common/utils';\r\nimport { SIZE, MIN, MAX, MULTIPLY } from '../common/defines';\r\n\r\ninterface ICalculationProps extends IPageProps {\r\n  finished: boolean;\r\n  session: number;\r\n  panel: any;\r\n  selectPanel: any;\r\n  updateScore: any;\r\n  updateTimer: any;\r\n}\r\n\r\nconst FC: React.FC<ICalculationProps> = (props) => {\r\n  const [_, refresh] = React.useState(0);\r\n  const { finished, session, panel, selectPanel, updateScore, updateTimer } = props;\r\n  const problems = React.useMemo(() => {\r\n    let offset = 0;\r\n    return [...Array(SIZE)].map((_, i) => {\r\n      const multiply = i < MULTIPLY;\r\n      const problem = {\r\n        operands: [Util.random(MIN, MAX), multiply ? Util.random(2, 10) : Util.random(MIN, MAX)],\r\n        multiply,\r\n        offset,\r\n      };\r\n      offset += ~~multiply * 2 + 1;\r\n      return problem;\r\n    });\r\n  }, [session]);\r\n\r\n  React.useEffect(() => {\r\n    updateTimer();\r\n  }, [session]);\r\n\r\n  return (\r\n    <div key={session}>\r\n      <div style={{ display: 'flex', position: 'fixed', backgroundColor: 'transparent', zIndex: 999 }}>\r\n        {[...Array(10)].map((_, i) => (\r\n          <CompDigit\r\n            key={i}\r\n            digit={i}\r\n            draggable={!finished}\r\n            onDragStart={(event: any) => selectPanel(null)}\r\n            onDragEnd={(event: any) => {\r\n              if (panel) {\r\n                const { index, operand } = panel;\r\n                operand.text = operand.text.replace(new RegExp(`(.{${index}})(.)`, 'i'), `$1${event.target.innerText}`);\r\n                updateScore(~~(operand.value[index] === operand.text[index]) - 1);\r\n                refresh(Math.random());\r\n              }\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n      <CompEvaluation />\r\n      <div className=\"content-panel\">\r\n        <div style={{ display: 'flex', flexFlow: 'wrap', backgroundColor: 'linen' }}>\r\n          {problems.map(({ operands, multiply, offset }, i) => {\r\n            return multiply ? (\r\n              <CompMultiplication key={i} id={offset} operands={operands} />\r\n            ) : (\r\n              <CompAddition key={i} id={offset} operands={operands} />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const PageCalculation = connectEvaluation(connectDigit(FC));\r\n","import JSZip from 'jszip';\r\nimport { grpc } from '@improbable-eng/grpc-web';\r\nimport { voice } from '../proto/voice_pb_service';\r\nimport { Word, VoiceData } from '../proto/voice_pb';\r\n\r\nexport namespace Voice {\r\n  const HOST = 'https://bacti.tk:8080';\r\n  export const predict = async (buffer: Uint8Array): Promise<any> => {\r\n    const request = new VoiceData();\r\n    request.setBuffer(buffer);\r\n\r\n    const data: Uint8Array = await new Promise((resolve) =>\r\n      grpc.unary(voice.predict, {\r\n        request,\r\n        host: HOST,\r\n        onEnd: ({ message, status }: any) =>\r\n          resolve(\r\n            status\r\n              ? null\r\n              : message.getWordsList().map((word: Word) => ({\r\n                  transcript: word.getTranscript(),\r\n                  confidence: word.getConfidence(),\r\n                }))\r\n          ),\r\n      })\r\n    );\r\n    return data;\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Howl } from 'howler';\r\nimport { Asset } from '../common/asset';\r\nimport { connectEvaluation } from '../common/redux';\r\n\r\ninterface ICompSpeakerProps extends React.SVGProps<SVGSVGElement> {\r\n  word: string;\r\n}\r\n\r\nexport const CompSpeaker: React.FC<ICompSpeakerProps> = (props) => {\r\n  const { word } = props;\r\n  const [icon, setIcon] = React.useState<string | null>(null);\r\n  const [audio, setAudio] = React.useState<any>(null);\r\n\r\n  React.useMemo(() => {\r\n    (async () => {\r\n      const wordIndex = `${word}${'_'.repeat(word.length)}`;\r\n      const url =\r\n        `https://www.oxfordlearnersdictionaries.com/media/american_english/us_pron/` +\r\n        `/${wordIndex.slice(0, 1)}` +\r\n        `/${wordIndex.slice(0, 3)}` +\r\n        `/${wordIndex.slice(0, 5)}` +\r\n        `/${word}__us_1.mp3`;\r\n      const blob = (await Asset.fetch(url, true)) || '';\r\n      const sound = new Howl({\r\n        src: [blob],\r\n        format: ['mp3'],\r\n        preload: true,\r\n      });\r\n      setAudio(sound);\r\n    })();\r\n  }, [word]);\r\n\r\n  React.useMemo(() => {\r\n    (async () => setIcon(await Asset.fetch('speaker.png')))();\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: 180,\r\n        textAlign: 'center',\r\n        zIndex: 999,\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          fontWeight: 'bold',\r\n          margin: 16,\r\n          cursor: 'pointer',\r\n          height: 96,\r\n          backgroundImage: `url(${icon})`,\r\n          backgroundSize: 'contain',\r\n          backgroundRepeat: 'no-repeat',\r\n          backgroundPosition: 'center',\r\n        }}\r\n        onClick={() => audio && audio.play()}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Asset } from '../common/asset';\r\nimport { Voice } from '../common/voice';\r\n\r\ndeclare var MediaRecorder: any;\r\ninterface ICompRecorderProps extends React.SVGProps<SVGSVGElement> {\r\n  word: string;\r\n}\r\n\r\nexport const CompRecorder: React.FC<ICompRecorderProps> = (props) => {\r\n  const [icons, setIcons] = React.useState<any>(null);\r\n  const [recording, setRecording] = React.useState(false);\r\n  const [predictedWord, predict] = React.useState(null);\r\n  const { word } = props;\r\n  const recorderEl = React.useMemo(() => {\r\n    async function initialize() {\r\n      const chunks: any[] = [];\r\n      const stream: MediaStream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new MediaRecorder(\r\n        stream\r\n        // { mimeType: 'video/webm; codecs=vp9' }\r\n      );\r\n      recorder.ondataavailable = async (e: any) => {\r\n        chunks.push(e.data);\r\n        if (recorder.state === 'inactive') {\r\n          try {\r\n            const blob = new Blob(chunks, { type: 'audio/webm' });\r\n            // const audioEl = document.createElement('audio');\r\n            // audioEl.src = URL.createObjectURL(blob);\r\n            // audioEl.play();\r\n\r\n            const data = await new Response(blob).arrayBuffer();\r\n            const [predictedWord] = await Voice.predict(new Uint8Array(data));\r\n            predict(predictedWord);\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n        }\r\n      };\r\n      recorder.onstop = () => (chunks.length = 0);\r\n      return recorder;\r\n    }\r\n    return initialize();\r\n  }, [word]);\r\n\r\n  React.useMemo(() => {\r\n    (async () =>\r\n      setIcons(await Promise.all([Asset.fetch('recording.png'), Asset.fetch('recorder.png')])))();\r\n  }, []);\r\n  const { transcript, confidence }: any = predictedWord || {};\r\n\r\n  if (!icons) return null;\r\n  return (\r\n    <div\r\n      style={{\r\n        width: 180,\r\n        textAlign: 'center',\r\n        zIndex: 999,\r\n      }}\r\n    >\r\n      <div\r\n        className=\"button\"\r\n        style={{\r\n          backgroundImage: `url(${icons[+!recording]})`,\r\n        }}\r\n        onClick={() => {\r\n          predict(null);\r\n          recorderEl.then((recorder) => {\r\n            setRecording(recorder.start() || true);\r\n            setTimeout(() => setRecording(recorder.stop() || false), 2000);\r\n          });\r\n        }}\r\n      />\r\n      {transcript && <div style={{ marginTop: -20 }}>{`${transcript}\\n${confidence}`}</div>}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport createStore from 'redux-zero';\r\nimport { Provider, connect } from 'redux-zero/react';\r\nimport { IMAGES } from '../common/defines';\r\nimport { Util } from '../common/utils';\r\nimport { PageLoading } from './PageLoading';\r\nimport { PageProfile } from './PageProfile';\r\nimport { PageSubject } from './PageSubject';\r\nimport { PageCalculation } from './PageCalculation';\r\nimport { PageEnglish } from './PageEnglish';\r\nimport { PageMusic } from './PageMusic';\r\nimport './index.scss';\r\nimport './fonts.scss';\r\n\r\nexport interface IPageProps extends React.SVGProps<SVGSVGElement> {\r\n  push: any;\r\n  pop: any;\r\n}\r\n\r\nexport namespace Page {\r\n  export enum ETypes {\r\n    LOADING,\r\n    PROFILE,\r\n    SUBJECT,\r\n    CALCULATION,\r\n    ENGLISH,\r\n    MUSIC,\r\n  }\r\n\r\n  const pages = (props: any) => ({\r\n    [ETypes.LOADING]: <PageLoading key=\"PageLoading\" {...props} />,\r\n    [ETypes.PROFILE]: <PageProfile key=\"PageProfile\" {...props} />,\r\n    [ETypes.SUBJECT]: <PageSubject key=\"PageSubject\" {...props} />,\r\n    [ETypes.CALCULATION]: <PageCalculation key=\"PageCalculation\" {...props} />,\r\n    [ETypes.ENGLISH]: <PageEnglish key=\"PageEnglish\" {...props} />,\r\n    [ETypes.MUSIC]: <PageMusic key=\"PageMusic\" {...props} />,\r\n  });\r\n  const stack: ETypes[] = [];\r\n  const store = createStore({\r\n    currentPage: ETypes.LOADING,\r\n    results: [],\r\n    penalty: 0,\r\n    finished: false,\r\n    random: Util.shuffleGenerator(IMAGES.length),\r\n  });\r\n\r\n  const mapToProps = ({ currentPage }: any) => ({ currentPage });\r\n  const actions = (store: any, props: any) => ({\r\n    push: ({ currentPage }: any, next: ETypes) => {\r\n      stack.push(currentPage);\r\n      store.setState({ currentPage: next });\r\n    },\r\n    pop: (state: any) => {\r\n      const previous = stack.pop();\r\n      store.setState({ currentPage: previous });\r\n    },\r\n  });\r\n  const Content = connect(\r\n    mapToProps,\r\n    actions\r\n  )((props: any) => pages(props)[props.currentPage as ETypes]);\r\n\r\n  export const Display: any = () => (\r\n    <Provider store={store}>\r\n      <Content />\r\n    </Provider>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Asset } from '../common/asset';\r\nimport { Dictionary } from '../common/dictionary';\r\nimport { connectLetter, connectEvaluation } from '../common/redux';\r\nimport { CompLetterPanel } from './CompLetterPanel';\r\nimport { CompSpeaker } from './CompSpeaker';\r\nimport { CompRecorder } from './CompRecorder';\r\n\r\ninterface ICompWordProps extends React.SVGProps<SVGSVGElement> {\r\n  word: string;\r\n  pickPanel: any;\r\n}\r\n\r\nconst FC: React.FC<ICompWordProps> = ({ word, pickPanel }) => {\r\n  const [image, setImage] = React.useState<any>(null);\r\n  const [audio, setAudio] = React.useState<any>(null);\r\n  React.useMemo(() => {\r\n    (async () => {\r\n      const [image, info] = await Promise.all([\r\n        Asset.fetch(`wild-animals/${word}-150x150.png`),\r\n        Dictionary.lookup(word),\r\n      ]);\r\n      if (info) {\r\n        const [{ audio, text }] = info.phonetics;\r\n        setAudio(audio);\r\n      }\r\n      setImage(image);\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"word\">\r\n      <div style={{ display: 'flex' }}>\r\n        <div\r\n          className=\"word-picture\"\r\n          style={{\r\n            backgroundImage: `url(${image})`,\r\n          }}\r\n        />\r\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n          <CompSpeaker word={word} />\r\n          <CompRecorder word={word} />\r\n        </div>\r\n      </div>\r\n      <div className=\"word-panel\">\r\n        {[...word.toUpperCase()].map((letter, i) => (\r\n          <CompLetterPanel\r\n            key={i}\r\n            onDragOver={(event: any) => event.preventDefault()}\r\n            onDrop={(event: any) => {\r\n              const panel = event.currentTarget;\r\n              panel.valid = letter;\r\n              pickPanel(panel);\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const CompWord = connectEvaluation(connectLetter(FC));\r\n","import React, { SVGProps, useState, useEffect } from 'react';\r\nimport { connect } from 'redux-zero/react';\r\nimport Draggable from 'react-draggable';\r\nimport { IPageProps } from '.';\r\nimport { CompLetter } from '../components/CompLetter';\r\nimport { CompAlphabet } from '../components/CompAlphabet';\r\nimport { CompWord } from '../components/CompWord';\r\nimport { CompEvaluation } from '../components/CompEvaluation';\r\nimport { CompAddition } from '../components/CompAddition';\r\nimport { connectDigit, connectEvaluation } from '../common/redux';\r\nimport { Util } from '../common/utils';\r\nimport { WILD_ANIMALS } from '../common/defines';\r\nimport logo from './draggable_4.svg';\r\n\r\ninterface IPageEnglishProps extends IPageProps {\r\n  finished: boolean;\r\n  session: number;\r\n  digitPanel: any;\r\n  targetPanel: any;\r\n  updateScore: any;\r\n}\r\n\r\nconst FC: React.FC<IPageEnglishProps> = (props) => {\r\n  const [_, refresh] = React.useState(0);\r\n  const { finished, session, digitPanel, targetPanel, updateScore } = props;\r\n  const word = React.useMemo(() => WILD_ANIMALS[Util.random(0, WILD_ANIMALS.length)], [session]);\r\n  return (\r\n    <div key={session}>\r\n      <CompAlphabet />\r\n      <CompEvaluation />\r\n      <CompWord word={word} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const PageEnglish = connectEvaluation(connectDigit(FC));\r\n","import React from 'react';\r\nimport abcjs from 'abcjs';\r\nimport { IPageProps } from '.';\r\nimport { connectEvaluation } from '../common/redux';\r\nimport 'abcjs/abcjs-audio.css';\r\n\r\ninterface IPageMusicProps extends IPageProps {\r\n  session: number;\r\n}\r\n\r\nconst FC: React.FC<IPageMusicProps> = (props) => {\r\n  const sheet = React.useRef<HTMLDivElement>(null);\r\n  const { session } = props;\r\n\r\n  React.useEffect(() => {\r\n    var abc =\r\n      \"T: Cooley's\\n\" +\r\n      'M: 4/4\\n' +\r\n      'L: 1/8\\n' +\r\n      'R: reel\\n' +\r\n      'K: Emin\\n' +\r\n      '|:D2|EB{c}BA B2 EB|~B2 AB dBAG|FDAD BDAD|FDAD dAFD|\\n' +\r\n      'EBBA B2 EB|B2 AB defg|afe^c dBAF|DEFD E2:|\\n' +\r\n      '|:gf|eB B2 efge|eB B2 gedB|A2 FA DAFA|A2 FA defg|\\n' +\r\n      'eB B2 eBgB|eB B2 defg|afe^c dBAF|DEFD E2:|';\r\n    const [visualObj] = abcjs.renderAbc(sheet.current, abc, {\r\n      // add_classes: true,\r\n      responsive: 'resize',\r\n    });\r\n    console.log({ visualObj });\r\n    // const timingCallbacks = new abcjs.TimingCallbacks(visualObj, {\r\n    //   beatCallback: (\r\n    //     beatNumber: any,\r\n    //     totalBeats: any,\r\n    //     totalTime: any,\r\n    //     position: any,\r\n    //     debugInfo: any\r\n    //   ) => {\r\n    //     console.log({ beatNumber, totalBeats, totalTime, position, debugInfo });\r\n    //   },\r\n    //   eventCallback: (evt: any) => {\r\n    //     console.log(evt);\r\n    //   },\r\n    // });\r\n    // timingCallbacks.start();\r\n\r\n    (async () => {\r\n      if (abcjs.synth.supportsAudio()) {\r\n        const audioContext = new window.AudioContext();\r\n        await audioContext.resume();\r\n        const midiBuffer = new abcjs.synth.CreateSynth();\r\n        await midiBuffer.init({\r\n          visualObj: visualObj,\r\n          audioContext: audioContext,\r\n          millisecondsPerMeasure: visualObj.millisecondsPerMeasure(),\r\n        });\r\n        await midiBuffer.prime();\r\n        await midiBuffer.start();\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return <div key={session} ref={sheet}></div>;\r\n};\r\n\r\nexport const PageMusic = connectEvaluation(FC);\r\n","import { Page } from './pages';\nimport './App.css';\n\nfunction App() {\n  return <Page.Display />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './DragDropTouch';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","/**\n * @fileoverview\n * @enhanceable\n * @suppress {messageConventions} JS Compiler reports an error if a variable or\n *     field starts with 'MSG_' and isn't a translatable message.\n * @public\n */\n// GENERATED CODE -- DO NOT EDIT!\n\nvar jspb = require('google-protobuf');\nvar goog = jspb;\nvar global = Function('return this')();\n\ngoog.exportSymbol('proto.AssetRequest', null, global);\ngoog.exportSymbol('proto.AssetResponse', null, global);\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.AssetRequest = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.AssetRequest, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.AssetRequest.displayName = 'proto.AssetRequest';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.AssetRequest.prototype.toObject = function(opt_includeInstance) {\n  return proto.AssetRequest.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.AssetRequest} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.AssetRequest.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    uri: jspb.Message.getFieldWithDefault(msg, 1, \"\"),\n    external: jspb.Message.getFieldWithDefault(msg, 2, false)\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.AssetRequest}\n */\nproto.AssetRequest.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.AssetRequest;\n  return proto.AssetRequest.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.AssetRequest} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.AssetRequest}\n */\nproto.AssetRequest.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setUri(value);\n      break;\n    case 2:\n      var value = /** @type {boolean} */ (reader.readBool());\n      msg.setExternal(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.AssetRequest.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.AssetRequest.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.AssetRequest} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.AssetRequest.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getUri();\n  if (f.length > 0) {\n    writer.writeString(\n      1,\n      f\n    );\n  }\n  f = message.getExternal();\n  if (f) {\n    writer.writeBool(\n      2,\n      f\n    );\n  }\n};\n\n\n/**\n * optional string uri = 1;\n * @return {string}\n */\nproto.AssetRequest.prototype.getUri = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/** @param {string} value */\nproto.AssetRequest.prototype.setUri = function(value) {\n  jspb.Message.setProto3StringField(this, 1, value);\n};\n\n\n/**\n * optional bool external = 2;\n * Note that Boolean fields may be set to 0/1 when serialized from a Java server.\n * You should avoid comparisons like {@code val === true/false} in those cases.\n * @return {boolean}\n */\nproto.AssetRequest.prototype.getExternal = function() {\n  return /** @type {boolean} */ (jspb.Message.getFieldWithDefault(this, 2, false));\n};\n\n\n/** @param {boolean} value */\nproto.AssetRequest.prototype.setExternal = function(value) {\n  jspb.Message.setProto3BooleanField(this, 2, value);\n};\n\n\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.AssetResponse = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.AssetResponse, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.AssetResponse.displayName = 'proto.AssetResponse';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.AssetResponse.prototype.toObject = function(opt_includeInstance) {\n  return proto.AssetResponse.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.AssetResponse} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.AssetResponse.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    data: msg.getData_asB64()\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.AssetResponse}\n */\nproto.AssetResponse.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.AssetResponse;\n  return proto.AssetResponse.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.AssetResponse} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.AssetResponse}\n */\nproto.AssetResponse.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {!Uint8Array} */ (reader.readBytes());\n      msg.setData(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.AssetResponse.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.AssetResponse.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.AssetResponse} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.AssetResponse.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getData_asU8();\n  if (f.length > 0) {\n    writer.writeBytes(\n      1,\n      f\n    );\n  }\n};\n\n\n/**\n * optional bytes data = 1;\n * @return {!(string|Uint8Array)}\n */\nproto.AssetResponse.prototype.getData = function() {\n  return /** @type {!(string|Uint8Array)} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/**\n * optional bytes data = 1;\n * This is a type-conversion wrapper around `getData()`\n * @return {string}\n */\nproto.AssetResponse.prototype.getData_asB64 = function() {\n  return /** @type {string} */ (jspb.Message.bytesAsB64(\n      this.getData()));\n};\n\n\n/**\n * optional bytes data = 1;\n * Note that Uint8Array is not supported on all browsers.\n * @see http://caniuse.com/Uint8Array\n * This is a type-conversion wrapper around `getData()`\n * @return {!Uint8Array}\n */\nproto.AssetResponse.prototype.getData_asU8 = function() {\n  return /** @type {!Uint8Array} */ (jspb.Message.bytesAsU8(\n      this.getData()));\n};\n\n\n/** @param {!(string|Uint8Array)} value */\nproto.AssetResponse.prototype.setData = function(value) {\n  jspb.Message.setProto3BytesField(this, 1, value);\n};\n\n\ngoog.object.extend(exports, proto);\n","/**\n * @fileoverview\n * @enhanceable\n * @suppress {messageConventions} JS Compiler reports an error if a variable or\n *     field starts with 'MSG_' and isn't a translatable message.\n * @public\n */\n// GENERATED CODE -- DO NOT EDIT!\n\nvar jspb = require('google-protobuf');\nvar goog = jspb;\nvar global = Function('return this')();\n\ngoog.exportSymbol('proto.DictRequest', null, global);\ngoog.exportSymbol('proto.DictResponse', null, global);\ngoog.exportSymbol('proto.Phonetic', null, global);\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.DictRequest = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.DictRequest, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.DictRequest.displayName = 'proto.DictRequest';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.DictRequest.prototype.toObject = function(opt_includeInstance) {\n  return proto.DictRequest.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.DictRequest} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.DictRequest.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    word: jspb.Message.getFieldWithDefault(msg, 1, \"\")\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.DictRequest}\n */\nproto.DictRequest.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.DictRequest;\n  return proto.DictRequest.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.DictRequest} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.DictRequest}\n */\nproto.DictRequest.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setWord(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.DictRequest.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.DictRequest.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.DictRequest} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.DictRequest.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getWord();\n  if (f.length > 0) {\n    writer.writeString(\n      1,\n      f\n    );\n  }\n};\n\n\n/**\n * optional string word = 1;\n * @return {string}\n */\nproto.DictRequest.prototype.getWord = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/** @param {string} value */\nproto.DictRequest.prototype.setWord = function(value) {\n  jspb.Message.setProto3StringField(this, 1, value);\n};\n\n\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.DictResponse = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, proto.DictResponse.repeatedFields_, null);\n};\ngoog.inherits(proto.DictResponse, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.DictResponse.displayName = 'proto.DictResponse';\n}\n/**\n * List of repeated fields within this message type.\n * @private {!Array<number>}\n * @const\n */\nproto.DictResponse.repeatedFields_ = [2];\n\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.DictResponse.prototype.toObject = function(opt_includeInstance) {\n  return proto.DictResponse.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.DictResponse} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.DictResponse.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    word: jspb.Message.getFieldWithDefault(msg, 1, \"\"),\n    phoneticsList: jspb.Message.toObjectList(msg.getPhoneticsList(),\n    proto.Phonetic.toObject, includeInstance)\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.DictResponse}\n */\nproto.DictResponse.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.DictResponse;\n  return proto.DictResponse.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.DictResponse} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.DictResponse}\n */\nproto.DictResponse.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setWord(value);\n      break;\n    case 2:\n      var value = new proto.Phonetic;\n      reader.readMessage(value,proto.Phonetic.deserializeBinaryFromReader);\n      msg.addPhonetics(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.DictResponse.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.DictResponse.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.DictResponse} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.DictResponse.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getWord();\n  if (f.length > 0) {\n    writer.writeString(\n      1,\n      f\n    );\n  }\n  f = message.getPhoneticsList();\n  if (f.length > 0) {\n    writer.writeRepeatedMessage(\n      2,\n      f,\n      proto.Phonetic.serializeBinaryToWriter\n    );\n  }\n};\n\n\n/**\n * optional string word = 1;\n * @return {string}\n */\nproto.DictResponse.prototype.getWord = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/** @param {string} value */\nproto.DictResponse.prototype.setWord = function(value) {\n  jspb.Message.setProto3StringField(this, 1, value);\n};\n\n\n/**\n * repeated Phonetic phonetics = 2;\n * @return {!Array<!proto.Phonetic>}\n */\nproto.DictResponse.prototype.getPhoneticsList = function() {\n  return /** @type{!Array<!proto.Phonetic>} */ (\n    jspb.Message.getRepeatedWrapperField(this, proto.Phonetic, 2));\n};\n\n\n/** @param {!Array<!proto.Phonetic>} value */\nproto.DictResponse.prototype.setPhoneticsList = function(value) {\n  jspb.Message.setRepeatedWrapperField(this, 2, value);\n};\n\n\n/**\n * @param {!proto.Phonetic=} opt_value\n * @param {number=} opt_index\n * @return {!proto.Phonetic}\n */\nproto.DictResponse.prototype.addPhonetics = function(opt_value, opt_index) {\n  return jspb.Message.addToRepeatedWrapperField(this, 2, opt_value, proto.Phonetic, opt_index);\n};\n\n\nproto.DictResponse.prototype.clearPhoneticsList = function() {\n  this.setPhoneticsList([]);\n};\n\n\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.Phonetic = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.Phonetic, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.Phonetic.displayName = 'proto.Phonetic';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.Phonetic.prototype.toObject = function(opt_includeInstance) {\n  return proto.Phonetic.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.Phonetic} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.Phonetic.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    text: jspb.Message.getFieldWithDefault(msg, 1, \"\"),\n    audio: jspb.Message.getFieldWithDefault(msg, 2, \"\")\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.Phonetic}\n */\nproto.Phonetic.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.Phonetic;\n  return proto.Phonetic.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.Phonetic} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.Phonetic}\n */\nproto.Phonetic.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setText(value);\n      break;\n    case 2:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setAudio(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.Phonetic.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.Phonetic.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.Phonetic} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.Phonetic.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getText();\n  if (f.length > 0) {\n    writer.writeString(\n      1,\n      f\n    );\n  }\n  f = message.getAudio();\n  if (f.length > 0) {\n    writer.writeString(\n      2,\n      f\n    );\n  }\n};\n\n\n/**\n * optional string text = 1;\n * @return {string}\n */\nproto.Phonetic.prototype.getText = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/** @param {string} value */\nproto.Phonetic.prototype.setText = function(value) {\n  jspb.Message.setProto3StringField(this, 1, value);\n};\n\n\n/**\n * optional string audio = 2;\n * @return {string}\n */\nproto.Phonetic.prototype.getAudio = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 2, \"\"));\n};\n\n\n/** @param {string} value */\nproto.Phonetic.prototype.setAudio = function(value) {\n  jspb.Message.setProto3StringField(this, 2, value);\n};\n\n\ngoog.object.extend(exports, proto);\n","/**\n * @fileoverview\n * @enhanceable\n * @suppress {messageConventions} JS Compiler reports an error if a variable or\n *     field starts with 'MSG_' and isn't a translatable message.\n * @public\n */\n// GENERATED CODE -- DO NOT EDIT!\n\nvar jspb = require('google-protobuf');\nvar goog = jspb;\nvar global = Function('return this')();\n\ngoog.exportSymbol('proto.VoiceData', null, global);\ngoog.exportSymbol('proto.VoiceInfo', null, global);\ngoog.exportSymbol('proto.Word', null, global);\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.VoiceData = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.VoiceData, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.VoiceData.displayName = 'proto.VoiceData';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.VoiceData.prototype.toObject = function(opt_includeInstance) {\n  return proto.VoiceData.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.VoiceData} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.VoiceData.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    buffer: msg.getBuffer_asB64()\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.VoiceData}\n */\nproto.VoiceData.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.VoiceData;\n  return proto.VoiceData.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.VoiceData} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.VoiceData}\n */\nproto.VoiceData.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {!Uint8Array} */ (reader.readBytes());\n      msg.setBuffer(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.VoiceData.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.VoiceData.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.VoiceData} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.VoiceData.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getBuffer_asU8();\n  if (f.length > 0) {\n    writer.writeBytes(\n      1,\n      f\n    );\n  }\n};\n\n\n/**\n * optional bytes buffer = 1;\n * @return {!(string|Uint8Array)}\n */\nproto.VoiceData.prototype.getBuffer = function() {\n  return /** @type {!(string|Uint8Array)} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/**\n * optional bytes buffer = 1;\n * This is a type-conversion wrapper around `getBuffer()`\n * @return {string}\n */\nproto.VoiceData.prototype.getBuffer_asB64 = function() {\n  return /** @type {string} */ (jspb.Message.bytesAsB64(\n      this.getBuffer()));\n};\n\n\n/**\n * optional bytes buffer = 1;\n * Note that Uint8Array is not supported on all browsers.\n * @see http://caniuse.com/Uint8Array\n * This is a type-conversion wrapper around `getBuffer()`\n * @return {!Uint8Array}\n */\nproto.VoiceData.prototype.getBuffer_asU8 = function() {\n  return /** @type {!Uint8Array} */ (jspb.Message.bytesAsU8(\n      this.getBuffer()));\n};\n\n\n/** @param {!(string|Uint8Array)} value */\nproto.VoiceData.prototype.setBuffer = function(value) {\n  jspb.Message.setProto3BytesField(this, 1, value);\n};\n\n\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.VoiceInfo = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, proto.VoiceInfo.repeatedFields_, null);\n};\ngoog.inherits(proto.VoiceInfo, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.VoiceInfo.displayName = 'proto.VoiceInfo';\n}\n/**\n * List of repeated fields within this message type.\n * @private {!Array<number>}\n * @const\n */\nproto.VoiceInfo.repeatedFields_ = [1];\n\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.VoiceInfo.prototype.toObject = function(opt_includeInstance) {\n  return proto.VoiceInfo.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.VoiceInfo} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.VoiceInfo.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    wordsList: jspb.Message.toObjectList(msg.getWordsList(),\n    proto.Word.toObject, includeInstance)\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.VoiceInfo}\n */\nproto.VoiceInfo.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.VoiceInfo;\n  return proto.VoiceInfo.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.VoiceInfo} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.VoiceInfo}\n */\nproto.VoiceInfo.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = new proto.Word;\n      reader.readMessage(value,proto.Word.deserializeBinaryFromReader);\n      msg.addWords(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.VoiceInfo.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.VoiceInfo.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.VoiceInfo} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.VoiceInfo.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getWordsList();\n  if (f.length > 0) {\n    writer.writeRepeatedMessage(\n      1,\n      f,\n      proto.Word.serializeBinaryToWriter\n    );\n  }\n};\n\n\n/**\n * repeated Word words = 1;\n * @return {!Array<!proto.Word>}\n */\nproto.VoiceInfo.prototype.getWordsList = function() {\n  return /** @type{!Array<!proto.Word>} */ (\n    jspb.Message.getRepeatedWrapperField(this, proto.Word, 1));\n};\n\n\n/** @param {!Array<!proto.Word>} value */\nproto.VoiceInfo.prototype.setWordsList = function(value) {\n  jspb.Message.setRepeatedWrapperField(this, 1, value);\n};\n\n\n/**\n * @param {!proto.Word=} opt_value\n * @param {number=} opt_index\n * @return {!proto.Word}\n */\nproto.VoiceInfo.prototype.addWords = function(opt_value, opt_index) {\n  return jspb.Message.addToRepeatedWrapperField(this, 1, opt_value, proto.Word, opt_index);\n};\n\n\nproto.VoiceInfo.prototype.clearWordsList = function() {\n  this.setWordsList([]);\n};\n\n\n\n/**\n * Generated by JsPbCodeGenerator.\n * @param {Array=} opt_data Optional initial data array, typically from a\n * server response, or constructed directly in Javascript. The array is used\n * in place and becomes part of the constructed object. It is not cloned.\n * If no data is provided, the constructed object will be empty, but still\n * valid.\n * @extends {jspb.Message}\n * @constructor\n */\nproto.Word = function(opt_data) {\n  jspb.Message.initialize(this, opt_data, 0, -1, null, null);\n};\ngoog.inherits(proto.Word, jspb.Message);\nif (goog.DEBUG && !COMPILED) {\n  proto.Word.displayName = 'proto.Word';\n}\n\n\nif (jspb.Message.GENERATE_TO_OBJECT) {\n/**\n * Creates an object representation of this proto suitable for use in Soy templates.\n * Field names that are reserved in JavaScript and will be renamed to pb_name.\n * To access a reserved field use, foo.pb_<name>, eg, foo.pb_default.\n * For the list of reserved names please see:\n *     com.google.apps.jspb.JsClassTemplate.JS_RESERVED_WORDS.\n * @param {boolean=} opt_includeInstance Whether to include the JSPB instance\n *     for transitional soy proto support: http://goto/soy-param-migration\n * @return {!Object}\n */\nproto.Word.prototype.toObject = function(opt_includeInstance) {\n  return proto.Word.toObject(opt_includeInstance, this);\n};\n\n\n/**\n * Static version of the {@see toObject} method.\n * @param {boolean|undefined} includeInstance Whether to include the JSPB\n *     instance for transitional soy proto support:\n *     http://goto/soy-param-migration\n * @param {!proto.Word} msg The msg instance to transform.\n * @return {!Object}\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.Word.toObject = function(includeInstance, msg) {\n  var f, obj = {\n    transcript: jspb.Message.getFieldWithDefault(msg, 1, \"\"),\n    confidence: +jspb.Message.getFieldWithDefault(msg, 2, 0.0)\n  };\n\n  if (includeInstance) {\n    obj.$jspbMessageInstance = msg;\n  }\n  return obj;\n};\n}\n\n\n/**\n * Deserializes binary data (in protobuf wire format).\n * @param {jspb.ByteSource} bytes The bytes to deserialize.\n * @return {!proto.Word}\n */\nproto.Word.deserializeBinary = function(bytes) {\n  var reader = new jspb.BinaryReader(bytes);\n  var msg = new proto.Word;\n  return proto.Word.deserializeBinaryFromReader(msg, reader);\n};\n\n\n/**\n * Deserializes binary data (in protobuf wire format) from the\n * given reader into the given message object.\n * @param {!proto.Word} msg The message object to deserialize into.\n * @param {!jspb.BinaryReader} reader The BinaryReader to use.\n * @return {!proto.Word}\n */\nproto.Word.deserializeBinaryFromReader = function(msg, reader) {\n  while (reader.nextField()) {\n    if (reader.isEndGroup()) {\n      break;\n    }\n    var field = reader.getFieldNumber();\n    switch (field) {\n    case 1:\n      var value = /** @type {string} */ (reader.readString());\n      msg.setTranscript(value);\n      break;\n    case 2:\n      var value = /** @type {number} */ (reader.readFloat());\n      msg.setConfidence(value);\n      break;\n    default:\n      reader.skipField();\n      break;\n    }\n  }\n  return msg;\n};\n\n\n/**\n * Serializes the message to binary data (in protobuf wire format).\n * @return {!Uint8Array}\n */\nproto.Word.prototype.serializeBinary = function() {\n  var writer = new jspb.BinaryWriter();\n  proto.Word.serializeBinaryToWriter(this, writer);\n  return writer.getResultBuffer();\n};\n\n\n/**\n * Serializes the given message to binary data (in protobuf wire\n * format), writing to the given BinaryWriter.\n * @param {!proto.Word} message\n * @param {!jspb.BinaryWriter} writer\n * @suppress {unusedLocalVariables} f is only used for nested messages\n */\nproto.Word.serializeBinaryToWriter = function(message, writer) {\n  var f = undefined;\n  f = message.getTranscript();\n  if (f.length > 0) {\n    writer.writeString(\n      1,\n      f\n    );\n  }\n  f = message.getConfidence();\n  if (f !== 0.0) {\n    writer.writeFloat(\n      2,\n      f\n    );\n  }\n};\n\n\n/**\n * optional string transcript = 1;\n * @return {string}\n */\nproto.Word.prototype.getTranscript = function() {\n  return /** @type {string} */ (jspb.Message.getFieldWithDefault(this, 1, \"\"));\n};\n\n\n/** @param {string} value */\nproto.Word.prototype.setTranscript = function(value) {\n  jspb.Message.setProto3StringField(this, 1, value);\n};\n\n\n/**\n * optional float confidence = 2;\n * @return {number}\n */\nproto.Word.prototype.getConfidence = function() {\n  return /** @type {number} */ (+jspb.Message.getFieldWithDefault(this, 2, 0.0));\n};\n\n\n/** @param {number} value */\nproto.Word.prototype.setConfidence = function(value) {\n  jspb.Message.setProto3FloatField(this, 2, value);\n};\n\n\ngoog.object.extend(exports, proto);\n","// package: \n// file: proto/asset.proto\n\nvar proto_asset_pb = require(\"../proto/asset_pb\");\nvar grpc = require(\"@improbable-eng/grpc-web\").grpc;\n\nvar asset = (function () {\n  function asset() {}\n  asset.serviceName = \"asset\";\n  return asset;\n}());\n\nasset.fetch = {\n  methodName: \"fetch\",\n  service: asset,\n  requestStream: false,\n  responseStream: false,\n  requestType: proto_asset_pb.AssetRequest,\n  responseType: proto_asset_pb.AssetResponse\n};\n\nexports.asset = asset;\n\nfunction assetClient(serviceHost, options) {\n  this.serviceHost = serviceHost;\n  this.options = options || {};\n}\n\nassetClient.prototype.fetch = function fetch(requestMessage, metadata, callback) {\n  if (arguments.length === 2) {\n    callback = arguments[1];\n  }\n  var client = grpc.unary(asset.fetch, {\n    request: requestMessage,\n    host: this.serviceHost,\n    metadata: metadata,\n    transport: this.options.transport,\n    debug: this.options.debug,\n    onEnd: function (response) {\n      if (callback) {\n        if (response.status !== grpc.Code.OK) {\n          var err = new Error(response.statusMessage);\n          err.code = response.status;\n          err.metadata = response.trailers;\n          callback(err, null);\n        } else {\n          callback(null, response.message);\n        }\n      }\n    }\n  });\n  return {\n    cancel: function () {\n      callback = null;\n      client.close();\n    }\n  };\n};\n\nexports.assetClient = assetClient;\n\n","// package: \n// file: proto/dictionary.proto\n\nvar proto_dictionary_pb = require(\"../proto/dictionary_pb\");\nvar grpc = require(\"@improbable-eng/grpc-web\").grpc;\n\nvar dictionary = (function () {\n  function dictionary() {}\n  dictionary.serviceName = \"dictionary\";\n  return dictionary;\n}());\n\ndictionary.lookup = {\n  methodName: \"lookup\",\n  service: dictionary,\n  requestStream: false,\n  responseStream: false,\n  requestType: proto_dictionary_pb.DictRequest,\n  responseType: proto_dictionary_pb.DictResponse\n};\n\nexports.dictionary = dictionary;\n\nfunction dictionaryClient(serviceHost, options) {\n  this.serviceHost = serviceHost;\n  this.options = options || {};\n}\n\ndictionaryClient.prototype.lookup = function lookup(requestMessage, metadata, callback) {\n  if (arguments.length === 2) {\n    callback = arguments[1];\n  }\n  var client = grpc.unary(dictionary.lookup, {\n    request: requestMessage,\n    host: this.serviceHost,\n    metadata: metadata,\n    transport: this.options.transport,\n    debug: this.options.debug,\n    onEnd: function (response) {\n      if (callback) {\n        if (response.status !== grpc.Code.OK) {\n          var err = new Error(response.statusMessage);\n          err.code = response.status;\n          err.metadata = response.trailers;\n          callback(err, null);\n        } else {\n          callback(null, response.message);\n        }\n      }\n    }\n  });\n  return {\n    cancel: function () {\n      callback = null;\n      client.close();\n    }\n  };\n};\n\nexports.dictionaryClient = dictionaryClient;\n\n","// package: \n// file: proto/voice.proto\n\nvar proto_voice_pb = require(\"../proto/voice_pb\");\nvar grpc = require(\"@improbable-eng/grpc-web\").grpc;\n\nvar voice = (function () {\n  function voice() {}\n  voice.serviceName = \"voice\";\n  return voice;\n}());\n\nvoice.predict = {\n  methodName: \"predict\",\n  service: voice,\n  requestStream: false,\n  responseStream: false,\n  requestType: proto_voice_pb.VoiceData,\n  responseType: proto_voice_pb.VoiceInfo\n};\n\nexports.voice = voice;\n\nfunction voiceClient(serviceHost, options) {\n  this.serviceHost = serviceHost;\n  this.options = options || {};\n}\n\nvoiceClient.prototype.predict = function predict(requestMessage, metadata, callback) {\n  if (arguments.length === 2) {\n    callback = arguments[1];\n  }\n  var client = grpc.unary(voice.predict, {\n    request: requestMessage,\n    host: this.serviceHost,\n    metadata: metadata,\n    transport: this.options.transport,\n    debug: this.options.debug,\n    onEnd: function (response) {\n      if (callback) {\n        if (response.status !== grpc.Code.OK) {\n          var err = new Error(response.statusMessage);\n          err.code = response.status;\n          err.metadata = response.trailers;\n          callback(err, null);\n        } else {\n          callback(null, response.message);\n        }\n      }\n    }\n  });\n  return {\n    cancel: function () {\n      callback = null;\n      client.close();\n    }\n  };\n};\n\nexports.voiceClient = voiceClient;\n\n","// @ts-nocheck\r\nvar DragDropTouch;\r\n(function (DragDropTouch_1) {\r\n    'use strict';\r\n    /**\r\n     * Object used to hold the data that is being dragged during drag and drop operations.\r\n     *\r\n     * It may hold one or more data items of different types. For more information about\r\n     * drag and drop operations and data transfer objects, see\r\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\">HTML Drag and Drop API</a>.\r\n     *\r\n     * This object is created automatically by the @see:DragDropTouch singleton and is\r\n     * accessible through the @see:dataTransfer property of all drag events.\r\n     */\r\n    var DataTransfer = (function () {\r\n        function DataTransfer() {\r\n            this._dropEffect = 'move';\r\n            this._effectAllowed = 'all';\r\n            this._data = {};\r\n        }\r\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\r\n            /**\r\n             * Gets or sets the type of drag-and-drop operation currently selected.\r\n             * The value must be 'none',  'copy',  'link', or 'move'.\r\n             */\r\n            get: function () {\r\n                return this._dropEffect;\r\n            },\r\n            set: function (value) {\r\n                this._dropEffect = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\r\n            /**\r\n             * Gets or sets the types of operations that are possible.\r\n             * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',\r\n             * 'linkMove', 'move', 'all' or 'uninitialized'.\r\n             */\r\n            get: function () {\r\n                return this._effectAllowed;\r\n            },\r\n            set: function (value) {\r\n                this._effectAllowed = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\r\n            /**\r\n             * Gets an array of strings giving the formats that were set in the @see:dragstart event.\r\n             */\r\n            get: function () {\r\n                return Object.keys(this._data);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * Removes the data associated with a given type.\r\n         *\r\n         * The type argument is optional. If the type is empty or not specified, the data\r\n         * associated with all types is removed. If data for the specified type does not exist,\r\n         * or the data transfer contains no data, this method will have no effect.\r\n         *\r\n         * @param type Type of data to remove.\r\n         */\r\n        DataTransfer.prototype.clearData = function (type) {\r\n            if (type != null) {\r\n                delete this._data[type];\r\n            }\r\n            else {\r\n                this._data = null;\r\n            }\r\n        };\r\n        /**\r\n         * Retrieves the data for a given type, or an empty string if data for that type does\r\n         * not exist or the data transfer contains no data.\r\n         *\r\n         * @param type Type of data to retrieve.\r\n         */\r\n        DataTransfer.prototype.getData = function (type) {\r\n            return this._data[type] || '';\r\n        };\r\n        /**\r\n         * Set the data for a given type.\r\n         *\r\n         * For a list of recommended drag types, please see\r\n         * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.\r\n         *\r\n         * @param type Type of data to add.\r\n         * @param value Data to add.\r\n         */\r\n        DataTransfer.prototype.setData = function (type, value) {\r\n            this._data[type] = value;\r\n        };\r\n        /**\r\n         * Set the image to be used for dragging if a custom one is desired.\r\n         *\r\n         * @param img An image element to use as the drag feedback image.\r\n         * @param offsetX The horizontal offset within the image.\r\n         * @param offsetY The vertical offset within the image.\r\n         */\r\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\r\n            var ddt = DragDropTouch._instance;\r\n            ddt._imgCustom = img;\r\n            ddt._imgOffset = { x: offsetX, y: offsetY };\r\n        };\r\n        return DataTransfer;\r\n    }());\r\n    DragDropTouch_1.DataTransfer = DataTransfer;\r\n    /**\r\n     * Defines a class that adds support for touch-based HTML5 drag/drop operations.\r\n     *\r\n     * The @see:DragDropTouch class listens to touch events and raises the\r\n     * appropriate HTML5 drag/drop events as if the events had been caused\r\n     * by mouse actions.\r\n     *\r\n     * The purpose of this class is to enable using existing, standard HTML5\r\n     * drag/drop code on mobile devices running IOS or Android.\r\n     *\r\n     * To use, include the DragDropTouch.js file on the page. The class will\r\n     * automatically start monitoring touch events and will raise the HTML5\r\n     * drag drop events (dragstart, dragenter, dragleave, drop, dragend) which\r\n     * should be handled by the application.\r\n     *\r\n     * For details and examples on HTML drag and drop, see\r\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations.\r\n     */\r\n    var DragDropTouch = (function () {\r\n        /**\r\n         * Initializes the single instance of the @see:DragDropTouch class.\r\n         */\r\n        function DragDropTouch() {\r\n            this._lastClick = 0;\r\n            // enforce singleton pattern\r\n            if (DragDropTouch._instance) {\r\n                throw 'DragDropTouch instance already created.';\r\n            }\r\n            // detect passive event support\r\n            // https://github.com/Modernizr/Modernizr/issues/1894\r\n            var supportsPassive = false;\r\n            document.addEventListener('test', function () { }, {\r\n                get passive() {\r\n                    supportsPassive = true;\r\n                    return true;\r\n                }\r\n            });\r\n            // listen to touch events\r\n            if ('ontouchstart' in document) {\r\n                var d = document, ts = this._touchstart.bind(this), tm = this._touchmove.bind(this), te = this._touchend.bind(this), opt = supportsPassive ? { passive: false, capture: false } : false;\r\n                d.addEventListener('touchstart', ts, opt);\r\n                d.addEventListener('touchmove', tm, opt);\r\n                d.addEventListener('touchend', te);\r\n                d.addEventListener('touchcancel', te);\r\n            }\r\n        }\r\n        /**\r\n         * Gets a reference to the @see:DragDropTouch singleton.\r\n         */\r\n        DragDropTouch.getInstance = function () {\r\n            return DragDropTouch._instance;\r\n        };\r\n        // ** event handlers\r\n        DragDropTouch.prototype._touchstart = function (e) {\r\n            var _this = this;\r\n            if (this._shouldHandle(e)) {\r\n                // raise double-click and prevent zooming\r\n                if (Date.now() - this._lastClick < DragDropTouch._DBLCLICK) {\r\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\r\n                        e.preventDefault();\r\n                        this._reset();\r\n                        return;\r\n                    }\r\n                }\r\n                // clear all variables\r\n                this._reset();\r\n                // get nearest draggable element\r\n                var src = this._closestDraggable(e.target);\r\n                if (src) {\r\n                    // give caller a chance to handle the hover/move events\r\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\r\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\r\n                        // get ready to start dragging\r\n                        this._dragSource = src;\r\n                        this._ptDown = this._getPoint(e);\r\n                        this._lastTouch = e;\r\n                        e.preventDefault();\r\n                        // show context menu if the user hasn't started dragging after a while\r\n                        setTimeout(function () {\r\n                            if (_this._dragSource == src && _this._img == null) {\r\n                                if (_this._dispatchEvent(e, 'contextmenu', src)) {\r\n                                    _this._reset();\r\n                                }\r\n                            }\r\n                        }, DragDropTouch._CTXMENU);\r\n                        if (DragDropTouch._ISPRESSHOLDMODE) {\r\n                            this._pressHoldInterval = setTimeout(function () {\r\n                                _this._isDragEnabled = true;\r\n                                _this._touchmove(e);\r\n                            }, DragDropTouch._PRESSHOLDAWAIT);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        DragDropTouch.prototype._touchmove = function (e) {\r\n            if (this._shouldCancelPressHoldMove(e)) {\r\n              this._reset();\r\n              return;\r\n            }\r\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\r\n                // see if target wants to handle move\r\n                var target = this._getTarget(e);\r\n                if (this._dispatchEvent(e, 'mousemove', target)) {\r\n                    this._lastTouch = e;\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                // start dragging\r\n                if (this._dragSource && !this._img && this._shouldStartDragging(e)) {\r\n                    this._dispatchEvent(e, 'dragstart', this._dragSource);\r\n                    this._createImage(e);\r\n                    this._dispatchEvent(e, 'dragenter', target);\r\n                }\r\n                // continue dragging\r\n                if (this._img) {\r\n                    this._lastTouch = e;\r\n                    e.preventDefault(); // prevent scrolling\r\n                    if (target != this._lastTarget) {\r\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);\r\n                        this._dispatchEvent(e, 'dragenter', target);\r\n                        this._lastTarget = target;\r\n                    }\r\n                    this._moveImage(e);\r\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target);\r\n                }\r\n            }\r\n        };\r\n        DragDropTouch.prototype._touchend = function (e) {\r\n            if (this._shouldHandle(e)) {\r\n                // see if target wants to handle up\r\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                // user clicked the element but didn't drag, so clear the source and simulate a click\r\n                if (!this._img) {\r\n                    this._dragSource = null;\r\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\r\n                    this._lastClick = Date.now();\r\n                }\r\n                // finish dragging\r\n                this._destroyImage();\r\n                if (this._dragSource) {\r\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\r\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);\r\n                    }\r\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);\r\n                    this._reset();\r\n                }\r\n            }\r\n        };\r\n        // ** utilities\r\n        // ignore events that have been handled or that involve more than one touch\r\n        DragDropTouch.prototype._shouldHandle = function (e) {\r\n            return e &&\r\n                !e.defaultPrevented &&\r\n                e.touches && e.touches.length < 2;\r\n        };\r\n\r\n        // use regular condition outside of press & hold mode\r\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\r\n          return !DragDropTouch._ISPRESSHOLDMODE && this._shouldHandle(e);\r\n        };\r\n\r\n        // allow to handle moves that involve many touches for press & hold\r\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\r\n          return DragDropTouch._ISPRESSHOLDMODE &&\r\n              this._isDragEnabled && e && e.touches && e.touches.length;\r\n        };\r\n\r\n        // reset data if user drags without pressing & holding\r\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\r\n          return DragDropTouch._ISPRESSHOLDMODE && !this._isDragEnabled &&\r\n              this._getDelta(e) > DragDropTouch._PRESSHOLDMARGIN;\r\n        };\r\n\r\n        // start dragging when specified delta is detected\r\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\r\n            var delta = this._getDelta(e);\r\n            return delta > DragDropTouch._THRESHOLD ||\r\n                (DragDropTouch._ISPRESSHOLDMODE && delta >= DragDropTouch._PRESSHOLDTHRESHOLD);\r\n        }\r\n\r\n        // clear all members\r\n        DragDropTouch.prototype._reset = function () {\r\n            this._destroyImage();\r\n            this._dragSource = null;\r\n            this._lastTouch = null;\r\n            this._lastTarget = null;\r\n            this._ptDown = null;\r\n            this._isDragEnabled = false;\r\n            this._isDropZone = false;\r\n            this._dataTransfer = new DataTransfer();\r\n            clearInterval(this._pressHoldInterval);\r\n        };\r\n        // get point for a touch event\r\n        DragDropTouch.prototype._getPoint = function (e, page) {\r\n            if (e && e.touches) {\r\n                e = e.touches[0];\r\n            }\r\n            return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };\r\n        };\r\n        // get distance between the current touch event and the first one\r\n        DragDropTouch.prototype._getDelta = function (e) {\r\n            if (DragDropTouch._ISPRESSHOLDMODE && !this._ptDown) { return 0; }\r\n            var p = this._getPoint(e);\r\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\r\n        };\r\n        // get the element at a given touch event\r\n        DragDropTouch.prototype._getTarget = function (e) {\r\n            var pt = this._getPoint(e), el = document.elementFromPoint(pt.x, pt.y);\r\n            while (el && getComputedStyle(el).pointerEvents == 'none') {\r\n                el = el.parentElement;\r\n            }\r\n            return el;\r\n        };\r\n        // create drag image from source element\r\n        DragDropTouch.prototype._createImage = function (e) {\r\n            // just in case...\r\n            if (this._img) {\r\n                this._destroyImage();\r\n            }\r\n            // create drag image from custom element or drag source\r\n            var src = this._imgCustom || this._dragSource;\r\n            this._img = src.cloneNode(true);\r\n            this._copyStyle(src, this._img);\r\n            this._img.style.top = this._img.style.left = '-9999px';\r\n            // if creating from drag source, apply offset and opacity\r\n            if (!this._imgCustom) {\r\n                var rc = src.getBoundingClientRect(), pt = this._getPoint(e);\r\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\r\n                this._img.style.opacity = DragDropTouch._OPACITY.toString();\r\n            }\r\n            // add image to document\r\n            this._moveImage(e);\r\n            document.body.appendChild(this._img);\r\n        };\r\n        // dispose of drag image element\r\n        DragDropTouch.prototype._destroyImage = function () {\r\n            if (this._img && this._img.parentElement) {\r\n                this._img.parentElement.removeChild(this._img);\r\n            }\r\n            this._img = null;\r\n            this._imgCustom = null;\r\n        };\r\n        // move the drag image element\r\n        DragDropTouch.prototype._moveImage = function (e) {\r\n            var _this = this;\r\n            requestAnimationFrame(function () {\r\n                if (_this._img) {\r\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\r\n                    s.position = 'absolute';\r\n                    s.pointerEvents = 'none';\r\n                    s.zIndex = '999999';\r\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\r\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\r\n                }\r\n            });\r\n        };\r\n        // copy properties from an object to another\r\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\r\n            for (var i = 0; i < props.length; i++) {\r\n                var p = props[i];\r\n                dst[p] = src[p];\r\n            }\r\n        };\r\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\r\n            // remove potentially troublesome attributes\r\n            DragDropTouch._rmvAtts.forEach(function (att) {\r\n                dst.removeAttribute(att);\r\n            });\r\n            // copy canvas content\r\n            if (src instanceof HTMLCanvasElement) {\r\n                var cSrc = src, cDst = dst;\r\n                cDst.width = cSrc.width;\r\n                cDst.height = cSrc.height;\r\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\r\n            }\r\n            // copy style (without transitions)\r\n            var cs = getComputedStyle(src);\r\n            for (var i = 0; i < cs.length; i++) {\r\n                var key = cs[i];\r\n                if (key.indexOf('transition') < 0) {\r\n                    dst.style[key] = cs[key];\r\n                }\r\n            }\r\n            dst.style.pointerEvents = 'none';\r\n            // and repeat for all children\r\n            for (var i = 0; i < src.children.length; i++) {\r\n                this._copyStyle(src.children[i], dst.children[i]);\r\n            }\r\n        };\r\n        DragDropTouch.prototype._dispatchEvent = function (e, type, target) {\r\n            if (e && target) {\r\n                var evt = document.createEvent('Event'), t = e.touches ? e.touches[0] : e;\r\n                evt.initEvent(type, true, true);\r\n                evt.button = 0;\r\n                evt.which = evt.buttons = 1;\r\n                this._copyProps(evt, e, DragDropTouch._kbdProps);\r\n                this._copyProps(evt, t, DragDropTouch._ptProps);\r\n                evt.dataTransfer = this._dataTransfer;\r\n                target.dispatchEvent(evt);\r\n                return evt.defaultPrevented;\r\n            }\r\n            return false;\r\n        };\r\n        // gets an element's closest draggable ancestor\r\n        DragDropTouch.prototype._closestDraggable = function (e) {\r\n            for (; e; e = e.parentElement) {\r\n                if (e.hasAttribute('draggable') && e.draggable) {\r\n                    return e;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n        return DragDropTouch;\r\n    }());\r\n    /*private*/ DragDropTouch._instance = new DragDropTouch(); // singleton\r\n    // constants\r\n    DragDropTouch._THRESHOLD = 5; // pixels to move before drag starts\r\n    DragDropTouch._OPACITY = 0.5; // drag image opacity\r\n    DragDropTouch._DBLCLICK = 500; // max ms between clicks in a double click\r\n    DragDropTouch._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\r\n    DragDropTouch._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\r\n    DragDropTouch._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\r\n    DragDropTouch._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\r\n    DragDropTouch._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\r\n    // copy styles/attributes from drag source to drag image element\r\n    DragDropTouch._rmvAtts = 'id,class,style,draggable'.split(',');\r\n    // synthesize and dispatch an event\r\n    // returns true if the event has been handled (e.preventDefault == true)\r\n    DragDropTouch._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\r\n    DragDropTouch._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY'.split(',');\r\n    DragDropTouch_1.DragDropTouch = DragDropTouch;\r\n})(DragDropTouch || (DragDropTouch = {}));\r\n"],"sourceRoot":""}